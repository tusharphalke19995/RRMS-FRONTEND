<div class="flex flex-col max-w-340 md:min-w-160 max-h-screen">

    
    <!-- Header with improved styling -->
    <div class="flex flex-0 items-center justify-between px-6 py-4 bg-gradient-to-r from-primary-600 to-primary-700 text-white shadow-md"
        cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle cdkDrag>
        <div class="flex items-center">
            <span class="text-xl font-semibold tracking-tight" *transloco="let t">{{t('addUser')}}</span>
        </div>
        <button mat-icon-button class=" rounded-full transition-colors duration-200" (click)="onNoClose()" [tabIndex]="-1">
            <mat-icon class="text-white" [svgIcon]="'heroicons_outline:x'"></mat-icon>
        </button>
    </div>

    <!-- Form Content -->
    <form [formGroup]="addUpdateUserForm" class="flex flex-col flex-auto p-6 overflow-y-auto">
        <!-- First Row -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
            <mat-form-field appearance="outline" class="w-full">
                <mat-label *transloco="let t" class="font-medium">{{t('firstName')}}</mat-label>
                <input matInput [formControlName]="'firstName'" placeholder="Enter employee name">
                <mat-error *ngIf="addUpdateUserForm.get('firstName').hasError('required')">
                    Required
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-full">
                <mat-label *transloco="let t" class="font-medium">{{t('lastName')}}</mat-label>
                <input matInput [formControlName]="'lastName'" placeholder="Enter employee name">
                <mat-error *ngIf="addUpdateUserForm.get('lastName').hasError('required')">
                    Required
                </mat-error>
            </mat-form-field>


            <mat-form-field appearance="outline" class="w-full">
                <mat-label *transloco="let t" class="font-medium">{{t('userEmail')}}</mat-label>
                <input matInput [formControlName]="'emailID'" placeholder="Enter email">
                <mat-error *ngIf="addUpdateUserForm.get('emailID').hasError('required')">
                    Required
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-full">
                <mat-label *transloco="let t" class="font-medium">{{t('kgId')}}</mat-label>
                <input matInput [formControlName]="'kgid'" placeholder="Enter KG ID">
                <mat-error *ngIf="addUpdateUserForm.get('kgid').hasError('required')">
                    Required
                </mat-error>
            </mat-form-field>

            <!-- <mat-form-field appearance="outline" class="w-full">
                <mat-label *transloco="let t" class="font-medium">{{t('designation')}}</mat-label>
                <input matInput [formControlName]="'designation'" placeholder="Enter designation">
                <mat-error *ngIf="addUpdateUserForm.get('designation').hasError('required')">
                    This field is required
                </mat-error>
            </mat-form-field> -->
        </div>

        <!-- Second Row -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <!-- <mat-form-field appearance="outline" class="w-full">
                <mat-label *transloco="let t" class="font-medium">{{t('userName')}}</mat-label>
                <input matInput [formControlName]="'userName'" placeholder="Enter username">
                <mat-error *ngIf="addUpdateUserForm.get('userName').hasError('required')">
                    This field is required
                </mat-error>
            </mat-form-field> -->

            <mat-form-field appearance="outline" class="w-full">
                <mat-label *transloco="let t" class="font-medium">{{t('empMobileno')}}</mat-label>
                <input matInput [formControlName]="'mobileNo'" placeholder="Enter mobile number">
                <mat-error *ngIf="addUpdateUserForm.get('mobileNo').hasError('required')">
                    Required
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-full">
                <mat-label *transloco="let t" class="font-medium">{{t('role')}}</mat-label>
                <mat-select [formControlName]="'roleId'">
                    <mat-option [value]="null">Please Select</mat-option>
                    <ng-container *ngFor="let roleInfo of userRoleDropdown; trackBy: trackByFn">
                        <mat-option [value]="roleInfo.roleId">{{roleInfo.roleName}}</mat-option>
                    </ng-container>
                </mat-select>
                <mat-error *ngIf="addUpdateUserForm.get('roleId').hasError('required')">
                      Required
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-full">
                <mat-label *transloco="let t" class="font-medium">{{t('division')}}</mat-label>
                <mat-select [formControlName]="'divisionId'">
                    <mat-option [value]="null">Please Select</mat-option>
                    <ng-container *ngFor="let roleInfo of divisionDropdown; trackBy: trackByFn">
                        <mat-option [value]="roleInfo.divisionId">{{roleInfo.divisionName}}</mat-option>
                    </ng-container>
                </mat-select>
                <mat-error *ngIf="addUpdateUserForm.get('divisionId').hasError('required')">
                      Required
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-full">
                <mat-label *transloco="let t" class="font-medium">{{t('designations')}}</mat-label>
                <mat-select [formControlName]="'designationId'">
                    <mat-option [value]="null">Please Select</mat-option>
                    <ng-container *ngFor="let designationInfo of designationsDropdown; trackBy: trackByFn">
                        <mat-option [value]="designationInfo.designationId">{{designationInfo.designationName}}</mat-option>
                    </ng-container>
                </mat-select>
                <mat-error *ngIf="addUpdateUserForm.get('designationId').hasError('required')">
                      Required
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-full">
                <mat-label *transloco="let t" class="font-medium">{{t('password')}}</mat-label>
                <input matInput [type]="hidePassword ? 'password' : 'text'" 
                       [formControlName]="'password'" 
                       placeholder="Enter password">
                <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword" type="button">
                    <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                </button>
                <mat-error *ngIf="addUpdateUserForm.get('password').hasError('required')">
                    Password is required
                </mat-error>
                <mat-error *ngIf="addUpdateUserForm.get('password').hasError('pattern')">
                    Password must contain at least 8 characters, one uppercase letter, one lowercase letter, one number and one special character
                </mat-error>
            </mat-form-field>
        </div>

        <!-- Action Buttons -->
        <div class="flex justify-end space-x-3 mt-6 pt-4 border-t">
            <button mat-flat-button
                    class="min-w-[90px] px-6 py-2 rounded-full bg-primary-600 text-white hover:bg-primary-700 transition-colors duration-200"
                    (click)="userSave()"
                    [disabled]="this.addUpdateUserForm.invalid" *transloco="let t" >
                   {{t('submit')}}
            </button>
            <button mat-stroked-button
                    class="min-w-[90px] px-6 py-2 rounded-full border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors duration-200"
                    (click)="onNoClose()" *transloco="let t" >
                
                {{t('cancel')}}
            </button>
        </div>
    </form>
</div>