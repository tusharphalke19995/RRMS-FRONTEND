{"ast":null,"code":"import { inject } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'app/core/auth/auth.service';\nimport { of, switchMap } from 'rxjs';\nexport const AuthGuard = (route, state) => {\n  const router = inject(Router);\n  // Check the authentication status\n  return inject(AuthService).check().pipe(switchMap(authenticated => {\n    // If the user is not authenticated...\n    if (!authenticated) {\n      // Redirect to the sign-in page with a redirectUrl param\n      const redirectURL = state.url === '/sign-out' ? '' : `redirectURL=${state.url}`;\n      const urlTree = router.parseUrl(`sign-in?${redirectURL}`);\n      return of(urlTree);\n    }\n    // Allow the access\n    return of(true);\n  }));\n};","map":{"version":3,"names":["inject","Router","AuthService","of","switchMap","AuthGuard","route","state","router","check","pipe","authenticated","redirectURL","url","urlTree","parseUrl"],"sources":["/Users/tusharphalke/Documents/Freelancing_Work/rrms_frontend/src/app/core/auth/guards/auth.guard.ts"],"sourcesContent":["import { inject } from '@angular/core';\nimport { CanActivateChildFn, CanActivateFn, Router } from '@angular/router';\nimport { AuthService } from 'app/core/auth/auth.service';\nimport { of, switchMap } from 'rxjs';\n\nexport const AuthGuard: CanActivateFn | CanActivateChildFn = (route, state) =>\n{\n    const router: Router = inject(Router);\n\n    // Check the authentication status\n    return inject(AuthService).check().pipe(\n        switchMap((authenticated) =>\n        {\n            // If the user is not authenticated...\n            if ( !authenticated )\n            {\n                // Redirect to the sign-in page with a redirectUrl param\n                const redirectURL = state.url === '/sign-out' ? '' : `redirectURL=${state.url}`;\n                const urlTree = router.parseUrl(`sign-in?${redirectURL}`);\n\n                return of(urlTree);\n            }\n\n            // Allow the access\n            return of(true);\n        }),\n    );\n};\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,eAAe;AACtC,SAA4CC,MAAM,QAAQ,iBAAiB;AAC3E,SAASC,WAAW,QAAQ,4BAA4B;AACxD,SAASC,EAAE,EAAEC,SAAS,QAAQ,MAAM;AAEpC,OAAO,MAAMC,SAAS,GAAuCA,CAACC,KAAK,EAAEC,KAAK,KAAI;EAE1E,MAAMC,MAAM,GAAWR,MAAM,CAACC,MAAM,CAAC;EAErC;EACA,OAAOD,MAAM,CAACE,WAAW,CAAC,CAACO,KAAK,EAAE,CAACC,IAAI,CACnCN,SAAS,CAAEO,aAAa,IAAI;IAExB;IACA,IAAK,CAACA,aAAa,EACnB;MACI;MACA,MAAMC,WAAW,GAAGL,KAAK,CAACM,GAAG,KAAK,WAAW,GAAG,EAAE,GAAG,eAAeN,KAAK,CAACM,GAAG,EAAE;MAC/E,MAAMC,OAAO,GAAGN,MAAM,CAACO,QAAQ,CAAC,WAAWH,WAAW,EAAE,CAAC;MAEzD,OAAOT,EAAE,CAACW,OAAO,CAAC;;IAGtB;IACA,OAAOX,EAAE,CAAC,IAAI,CAAC;EACnB,CAAC,CAAC,CACL;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}