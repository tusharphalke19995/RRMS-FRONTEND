{"ast":null,"code":"import { TextFieldModule } from '@angular/cdk/text-field';\nimport { DatePipe, DOCUMENT, NgClass, NgFor, NgIf, NgTemplateOutlet } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { FuseScrollbarDirective } from '@fuse/directives/scrollbar';\nimport { Subject, takeUntil } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/layout/common/quick-chat/quick-chat.service\";\nimport * as i2 from \"@angular/cdk/overlay\";\nimport * as i3 from \"@angular/material/icon\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/cdk/text-field\";\nconst _c0 = [\"messageInput\"];\nfunction QuickChatComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 12)(2, \"div\", 13);\n    i0.ɵɵelement(3, \"mat-icon\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 15);\n    i0.ɵɵtext(5, \"Team Chat\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 16);\n    i0.ɵɵelement(7, \"mat-icon\", 17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"svgIcon\", \"heroicons_outline:chat-bubble-left-right\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"svgIcon\", \"heroicons_outline:x-mark\");\n  }\n}\nfunction QuickChatComponent_ng_container_4_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"img\", 21);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", ctx_r8.chat.contact.avatar, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction QuickChatComponent_ng_container_4_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 22);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r9.chat.contact.name.charAt(0), \" \");\n  }\n}\nfunction QuickChatComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 18)(2, \"div\", 19);\n    i0.ɵɵtemplate(3, QuickChatComponent_ng_container_4_ng_container_3_Template, 2, 1, \"ng-container\", 3)(4, QuickChatComponent_ng_container_4_ng_container_4_Template, 3, 1, \"ng-container\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 20);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 16);\n    i0.ɵɵelement(8, \"mat-icon\", 17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.chat.contact.avatar);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.chat.contact.avatar);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.chat.contact.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"svgIcon\", \"heroicons_outline:x-mark\");\n  }\n}\nfunction QuickChatComponent_ng_container_8_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"div\", 25);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const chat_r10 = i0.ɵɵnextContext().$implicit;\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"ring-primary-50\", ctx_r11.selectedChat && ctx_r11.selectedChat.id === chat_r10.id);\n  }\n}\nfunction QuickChatComponent_ng_container_8_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"img\", 21);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const chat_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", chat_r10.contact.avatar, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction QuickChatComponent_ng_container_8_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 22);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const chat_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", chat_r10.contact.name.charAt(0), \" \");\n  }\n}\nconst _c1 = (a0, a1) => ({\n  \"hover:bg-gray-100 dark:hover:bg-hover\": a0,\n  \"bg-primary-50 dark:bg-hover\": a1\n});\nfunction QuickChatComponent_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 23);\n    i0.ɵɵlistener(\"click\", function QuickChatComponent_ng_container_8_Template_div_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const chat_r10 = restoredCtx.$implicit;\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.selectChat(chat_r10.id));\n    });\n    i0.ɵɵelementStart(2, \"div\", 24);\n    i0.ɵɵtemplate(3, QuickChatComponent_ng_container_8_ng_container_3_Template, 2, 2, \"ng-container\", 3)(4, QuickChatComponent_ng_container_8_ng_container_4_Template, 2, 1, \"ng-container\", 3)(5, QuickChatComponent_ng_container_8_ng_container_5_Template, 3, 1, \"ng-container\", 3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const chat_r10 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(4, _c1, !ctx_r2.selectedChat || ctx_r2.selectedChat.id !== chat_r10.id, ctx_r2.selectedChat && ctx_r2.selectedChat.id === chat_r10.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", chat_r10.unreadCount > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", chat_r10.contact.avatar);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !chat_r10.contact.avatar);\n  }\n}\nfunction QuickChatComponent_ng_container_10_ng_container_3_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 37);\n    i0.ɵɵelement(2, \"div\", 38);\n    i0.ɵɵelementStart(3, \"div\", 39);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"div\", 38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const message_r21 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(5, 1, message_r21.createdAt, \"longDate\"), \" \");\n  }\n}\nfunction QuickChatComponent_ng_container_10_ng_container_3_ng_container_6_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nconst _c2 = (a0, a1) => ({\n  \"text-blue-500 -right-1 -mr-px mb-px\": a0,\n  \"text-gray-500 -left-1 -ml-px mb-px -scale-x-1\": a1\n});\nfunction QuickChatComponent_ng_container_10_ng_container_3_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 40);\n    i0.ɵɵtemplate(2, QuickChatComponent_ng_container_10_ng_container_3_ng_container_6_ng_container_2_Template, 1, 0, \"ng-container\", 41);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const message_r21 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵnextContext(2);\n    const _r7 = i0.ɵɵreference(14);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c2, message_r21.isMine, !message_r21.isMine));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r7);\n  }\n}\nconst _c3 = (a0, a1) => ({\n  \"mr-3\": a0,\n  \"ml-3\": a1\n});\nfunction QuickChatComponent_ng_container_10_ng_container_3_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 42);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const message_r21 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(5, _c3, message_r21.isMine, !message_r21.isMine));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(3, 2, message_r21.createdAt, \"HH:mm\"), \" \");\n  }\n}\nconst _c4 = (a0, a1, a2, a3) => ({\n  \"items-end\": a0,\n  \"items-start\": a1,\n  \"mt-0.5\": a2,\n  \"mt-3\": a3\n});\nconst _c5 = (a0, a1) => ({\n  \"bg-blue-500 text-blue-50\": a0,\n  \"bg-gray-500 text-gray-50\": a1\n});\nfunction QuickChatComponent_ng_container_10_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, QuickChatComponent_ng_container_10_ng_container_3_ng_container_1_Template, 7, 4, \"ng-container\", 3);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementStart(4, \"div\", 34)(5, \"div\", 35);\n    i0.ɵɵtemplate(6, QuickChatComponent_ng_container_10_ng_container_3_ng_container_6_Template, 3, 5, \"ng-container\", 3);\n    i0.ɵɵelement(7, \"div\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, QuickChatComponent_ng_container_10_ng_container_3_ng_container_8_Template, 4, 8, \"ng-container\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const message_r21 = ctx.$implicit;\n    const i_r22 = ctx.index;\n    const first_r23 = ctx.first;\n    const last_r24 = ctx.last;\n    const ctx_r19 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", first_r23 || i0.ɵɵpipeBind2(2, 6, ctx_r19.chat.messages[i_r22 - 1].createdAt, \"d\") !== i0.ɵɵpipeBind2(3, 9, message_r21.createdAt, \"d\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction4(12, _c4, message_r21.isMine, !message_r21.isMine, i_r22 > 0 && ctx_r19.chat.messages[i_r22 - 1].isMine === message_r21.isMine, i_r22 > 0 && ctx_r19.chat.messages[i_r22 - 1].isMine !== message_r21.isMine));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(17, _c5, message_r21.isMine, !message_r21.isMine));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", last_r24 || ctx_r19.chat.messages[i_r22 + 1].isMine !== message_r21.isMine);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", message_r21.value, i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", first_r23 || last_r24 || ctx_r19.chat.messages[i_r22 + 1].isMine !== message_r21.isMine || ctx_r19.chat.messages[i_r22 + 1].createdAt !== message_r21.createdAt);\n  }\n}\nfunction QuickChatComponent_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 26)(2, \"div\", 27);\n    i0.ɵɵtemplate(3, QuickChatComponent_ng_container_10_ng_container_3_Template, 9, 20, \"ng-container\", 7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 28)(5, \"mat-form-field\", 29);\n    i0.ɵɵelement(6, \"textarea\", 30, 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 32)(9, \"button\", 33);\n    i0.ɵɵelement(10, \"mat-icon\", 17);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.chat.messages)(\"ngForTrackBy\", ctx_r3.trackByFn);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"subscriptSizing\", \"dynamic\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"svgIcon\", \"heroicons_outline:paper-airplane\");\n  }\n}\nfunction QuickChatComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵelement(1, \"mat-icon\", 44);\n    i0.ɵɵelementStart(2, \"div\", 45);\n    i0.ɵɵtext(3, \"Select a conversation\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"svgIcon\", \"heroicons_outline:chat-bubble-bottom-center-text\");\n  }\n}\nfunction QuickChatComponent_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 46)(1, \"g\", 47);\n    i0.ɵɵelement(2, \"path\", 48);\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c6 = (a0, a1) => ({\n  \"-translate-x-full sm:-translate-x-96 lg:-translate-x-80 shadow\": a0,\n  \"translate-x-0\": a1\n});\nconst _c7 = () => ({\n  wheelPropagation: false\n});\nexport class QuickChatComponent {\n  /**\n   * Constructor\n   */\n  constructor(_document, _elementRef, _renderer2, _ngZone, _quickChatService, _scrollStrategyOptions) {\n    this._document = _document;\n    this._elementRef = _elementRef;\n    this._renderer2 = _renderer2;\n    this._ngZone = _ngZone;\n    this._quickChatService = _quickChatService;\n    this._scrollStrategyOptions = _scrollStrategyOptions;\n    this.opened = false;\n    this._scrollStrategy = this._scrollStrategyOptions.block();\n    this._unsubscribeAll = new Subject();\n  }\n  // -----------------------------------------------------------------------------------------------------\n  // @ Decorated methods\n  // -----------------------------------------------------------------------------------------------------\n  /**\n   * Host binding for component classes\n   */\n  get classList() {\n    return {\n      'quick-chat-opened': this.opened\n    };\n  }\n  /**\n   * Resize on 'input' and 'ngModelChange' events\n   *\n   * @private\n   */\n  _resizeMessageInput() {\n    // This doesn't need to trigger Angular's change detection by itself\n    this._ngZone.runOutsideAngular(() => {\n      setTimeout(() => {\n        // Set the height to 'auto' so we can correctly read the scrollHeight\n        this.messageInput.nativeElement.style.height = 'auto';\n        // Get the scrollHeight and subtract the vertical padding\n        this.messageInput.nativeElement.style.height = `${this.messageInput.nativeElement.scrollHeight}px`;\n      });\n    });\n  }\n  // -----------------------------------------------------------------------------------------------------\n  // @ Lifecycle hooks\n  // -----------------------------------------------------------------------------------------------------\n  /**\n   * On init\n   */\n  ngOnInit() {\n    // Chat\n    this._quickChatService.chat$.pipe(takeUntil(this._unsubscribeAll)).subscribe(chat => {\n      this.chat = chat;\n    });\n    // Chats\n    this._quickChatService.chats$.pipe(takeUntil(this._unsubscribeAll)).subscribe(chats => {\n      this.chats = chats;\n    });\n    // Selected chat\n    this._quickChatService.chat$.pipe(takeUntil(this._unsubscribeAll)).subscribe(chat => {\n      this.selectedChat = chat;\n    });\n  }\n  /**\n   * After view init\n   */\n  ngAfterViewInit() {\n    // Fix for Firefox.\n    //\n    // Because 'position: sticky' doesn't work correctly inside a 'position: fixed' parent,\n    // adding the '.cdk-global-scrollblock' to the html element breaks the navigation's position.\n    // This fixes the problem by reading the 'top' value from the html element and adding it as a\n    // 'marginTop' to the navigation itself.\n    this._mutationObserver = new MutationObserver(mutations => {\n      mutations.forEach(mutation => {\n        const mutationTarget = mutation.target;\n        if (mutation.attributeName === 'class') {\n          if (mutationTarget.classList.contains('cdk-global-scrollblock')) {\n            const top = parseInt(mutationTarget.style.top, 10);\n            this._renderer2.setStyle(this._elementRef.nativeElement, 'margin-top', `${Math.abs(top)}px`);\n          } else {\n            this._renderer2.setStyle(this._elementRef.nativeElement, 'margin-top', null);\n          }\n        }\n      });\n    });\n    this._mutationObserver.observe(this._document.documentElement, {\n      attributes: true,\n      attributeFilter: ['class']\n    });\n  }\n  /**\n   * On destroy\n   */\n  ngOnDestroy() {\n    // Disconnect the mutation observer\n    this._mutationObserver.disconnect();\n    // Unsubscribe from all subscriptions\n    this._unsubscribeAll.next(null);\n    this._unsubscribeAll.complete();\n  }\n  // -----------------------------------------------------------------------------------------------------\n  // @ Public methods\n  // -----------------------------------------------------------------------------------------------------\n  /**\n   * Open the panel\n   */\n  open() {\n    // Return if the panel has already opened\n    if (this.opened) {\n      return;\n    }\n    // Open the panel\n    this._toggleOpened(true);\n  }\n  /**\n   * Close the panel\n   */\n  close() {\n    // Return if the panel has already closed\n    if (!this.opened) {\n      return;\n    }\n    // Close the panel\n    this._toggleOpened(false);\n  }\n  /**\n   * Toggle the panel\n   */\n  toggle() {\n    if (this.opened) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n  /**\n   * Select the chat\n   *\n   * @param id\n   */\n  selectChat(id) {\n    // Open the panel\n    this._toggleOpened(true);\n    // Get the chat data\n    this._quickChatService.getChatById(id).subscribe();\n  }\n  /**\n   * Track by function for ngFor loops\n   *\n   * @param index\n   * @param item\n   */\n  trackByFn(index, item) {\n    return item.id || index;\n  }\n  // -----------------------------------------------------------------------------------------------------\n  // @ Private methods\n  // -----------------------------------------------------------------------------------------------------\n  /**\n   * Show the backdrop\n   *\n   * @private\n   */\n  _showOverlay() {\n    // Try hiding the overlay in case there is one already opened\n    this._hideOverlay();\n    // Create the backdrop element\n    this._overlay = this._renderer2.createElement('div');\n    // Return if overlay couldn't be create for some reason\n    if (!this._overlay) {\n      return;\n    }\n    // Add a class to the backdrop element\n    this._overlay.classList.add('quick-chat-overlay');\n    // Append the backdrop to the parent of the panel\n    this._renderer2.appendChild(this._elementRef.nativeElement.parentElement, this._overlay);\n    // Enable block scroll strategy\n    this._scrollStrategy.enable();\n    // Add an event listener to the overlay\n    this._overlay.addEventListener('click', () => {\n      this.close();\n    });\n  }\n  /**\n   * Hide the backdrop\n   *\n   * @private\n   */\n  _hideOverlay() {\n    if (!this._overlay) {\n      return;\n    }\n    // If the backdrop still exists...\n    if (this._overlay) {\n      // Remove the backdrop\n      this._overlay.parentNode.removeChild(this._overlay);\n      this._overlay = null;\n    }\n    // Disable block scroll strategy\n    this._scrollStrategy.disable();\n  }\n  /**\n   * Open/close the panel\n   *\n   * @param open\n   * @private\n   */\n  _toggleOpened(open) {\n    // Set the opened\n    this.opened = open;\n    // If the panel opens, show the overlay\n    if (open) {\n      this._showOverlay();\n    }\n    // Otherwise, hide the overlay\n    else {\n      this._hideOverlay();\n    }\n  }\n  static #_ = this.ɵfac = function QuickChatComponent_Factory(t) {\n    return new (t || QuickChatComponent)(i0.ɵɵdirectiveInject(DOCUMENT), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i1.QuickChatService), i0.ɵɵdirectiveInject(i2.ScrollStrategyOptions));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: QuickChatComponent,\n    selectors: [[\"quick-chat\"]],\n    viewQuery: function QuickChatComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.messageInput = _t.first);\n      }\n    },\n    hostVars: 2,\n    hostBindings: function QuickChatComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"input\", function QuickChatComponent_input_HostBindingHandler() {\n          return ctx._resizeMessageInput();\n        })(\"ngModelChange\", function QuickChatComponent_ngModelChange_HostBindingHandler() {\n          return ctx._resizeMessageInput();\n        });\n      }\n      if (rf & 2) {\n        i0.ɵɵclassMap(ctx.classList);\n      }\n    },\n    exportAs: [\"quickChat\"],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 15,\n    vars: 12,\n    consts: [[1, \"fixed\", \"lg:sticky\", \"top-0\", \"bottom-0\", \"lg:left-full\", \"w-full\", \"sm:w-96\", \"lg:w-16\", \"lg:h-screen\", \"lg:shadow\"], [1, \"flex\", \"flex-col\", \"w-full\", \"sm:w-96\", \"h-full\", \"transition-transform\", \"duration-400\", \"ease-drawer\", \"bg-card\", 3, \"ngClass\"], [1, \"quick-chat-header\", \"flex\", \"flex-0\", \"items-center\", \"justify-start\", \"cursor-pointer\", 3, \"click\"], [4, \"ngIf\"], [1, \"flex\", \"flex-auto\", \"border-t\", \"overflow-hidden\"], [\"fuseScrollbar\", \"\", 1, \"flex-0\", \"w-16\", \"h-full\", \"overflow-y-auto\", \"overscroll-y-contain\", \"sm:overflow-hidden\", \"sm:overscroll-auto\", 3, \"fuseScrollbarOptions\"], [1, \"flex-auto\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"flex\", \"flex-col\", \"flex-auto\", \"border-l\", \"overflow-hidden\", \"bg-gray-50\", \"dark:bg-transparent\"], [4, \"ngIf\", \"ngIfElse\"], [\"selectChatOrStartNew\", \"\"], [\"speechBubbleExtension\", \"\"], [1, \"flex\", \"flex-auto\", \"items-center\", \"justify-center\"], [1, \"flex\", \"flex-0\", \"items-center\", \"justify-center\", \"w-16\"], [1, \"icon-size-6\", 3, \"svgIcon\"], [1, \"text-lg\", \"font-medium\", \"text-secondary\"], [\"mat-icon-button\", \"\", 1, \"ml-auto\", \"mr-4\"], [3, \"svgIcon\"], [1, \"flex\", \"flex-auto\", \"items-center\", \"ml-3\"], [1, \"relative\", \"flex\", \"flex-0\", \"items-center\", \"justify-center\", \"w-10\", \"h-10\"], [1, \"ml-4\", \"text-lg\", \"font-medium\", \"leading-5\", \"truncate\"], [\"alt\", \"Contact avatar\", 1, \"w-full\", \"h-full\", \"rounded-full\", \"object-cover\", 3, \"src\"], [1, \"flex\", \"items-center\", \"justify-center\", \"w-full\", \"h-full\", \"rounded-full\", \"text-lg\", \"uppercase\", \"bg-gray-200\", \"text-gray-600\", \"dark:bg-gray-700\", \"dark:text-gray-200\"], [1, \"flex\", \"items-center\", \"py-3\", \"px-4\", \"cursor-pointer\", 3, \"ngClass\", \"click\"], [1, \"relative\", \"flex\", \"flex-0\", \"items-center\", \"justify-center\", \"w-8\", \"h-8\"], [1, \"absolute\", \"bottom-0\", \"right-0\", \"flex-0\", \"w-2\", \"h-2\", \"-ml-0.5\", \"rounded-full\", \"ring-2\", \"ring-bg-card\", \"dark:ring-gray-900\", \"bg-primary\", \"dark:bg-primary-500\", \"text-on-primary\"], [1, \"flex\", \"flex-col-reverse\", \"overflow-y-auto\", \"overscroll-y-contain\"], [1, \"flex\", \"flex-col\", \"flex-auto\", \"shrink\", \"p-6\"], [1, \"flex\", \"items-end\", \"p-4\", \"border-t\", \"bg-gray-50\", \"dark:bg-transparent\"], [1, \"fuse-mat-dense\", \"fuse-mat-rounded\", \"fuse-mat-bold\", \"w-full\", 3, \"subscriptSizing\"], [\"matInput\", \"\", \"cdkTextareaAutosize\", \"\"], [\"messageInput\", \"\"], [1, \"flex\", \"items-center\", \"h-11\", \"my-px\", \"ml-4\"], [\"mat-icon-button\", \"\"], [1, \"flex\", \"flex-col\", 3, \"ngClass\"], [1, \"relative\", \"max-w-3/4\", \"px-3\", \"py-2\", \"rounded-lg\", 3, \"ngClass\"], [1, \"min-w-4\", \"leading-5\", 3, \"innerHTML\"], [1, \"flex\", \"items-center\", \"justify-center\", \"my-3\", \"-mx-6\"], [1, \"flex-auto\", \"border-b\"], [1, \"flex-0\", \"mx-4\", \"text-sm\", \"font-medium\", \"leading-5\", \"text-secondary\"], [1, \"absolute\", \"bottom-0\", \"w-3\", 3, \"ngClass\"], [4, \"ngTemplateOutlet\"], [1, \"my-0.5\", \"text-sm\", \"font-medium\", \"text-secondary\", 3, \"ngClass\"], [1, \"flex\", \"flex-col\", \"flex-auto\", \"items-center\", \"justify-center\", \"w-full\", \"h-full\", \"p-4\"], [1, \"icon-size-24\", 3, \"svgIcon\"], [1, \"mt-4\", \"text-xl\", \"text-center\", \"font-medium\", \"tracking-tight\", \"text-secondary\"], [\"width\", \"100%\", \"height\", \"100%\", \"viewBox\", \"0 0 66 66\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"id\", \"Page-1\", \"stroke\", \"none\", \"stroke-width\", \"1\", \"fill\", \"none\", \"fill-rule\", \"evenodd\"], [\"d\", \"M1.01522827,0.516204834 C-8.83532715,54.3062744 61.7609863,70.5215302 64.8009949,64.3061218 C68.8074951,54.8859711 30.1663208,52.9997559 37.5036011,0.516204834 L1.01522827,0.516204834 Z\", \"fill\", \"currentColor\", \"fill-rule\", \"nonzero\"]],\n    template: function QuickChatComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵlistener(\"click\", function QuickChatComponent_Template_div_click_2_listener() {\n          return ctx.toggle();\n        });\n        i0.ɵɵtemplate(3, QuickChatComponent_ng_container_3_Template, 8, 2, \"ng-container\", 3)(4, QuickChatComponent_ng_container_4_Template, 9, 4, \"ng-container\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5)(7, \"div\", 6);\n        i0.ɵɵtemplate(8, QuickChatComponent_ng_container_8_Template, 6, 7, \"ng-container\", 7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 8);\n        i0.ɵɵtemplate(10, QuickChatComponent_ng_container_10_Template, 11, 4, \"ng-container\", 9);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵtemplate(11, QuickChatComponent_ng_template_11_Template, 4, 1, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor)(13, QuickChatComponent_ng_template_13_Template, 3, 0, \"ng-template\", null, 11, i0.ɵɵtemplateRefExtractor);\n      }\n      if (rf & 2) {\n        const _r5 = i0.ɵɵreference(12);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(8, _c6, ctx.opened, !ctx.opened));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.opened || ctx.opened && !ctx.selectedChat);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.opened && ctx.selectedChat);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"fuseScrollbarOptions\", i0.ɵɵpureFunction0(11, _c7));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.chats)(\"ngForTrackBy\", ctx.trackByFn);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.chat)(\"ngIfElse\", _r5);\n      }\n    },\n    dependencies: [NgClass, NgIf, MatIconModule, i3.MatIcon, MatButtonModule, i4.MatIconButton, FuseScrollbarDirective, NgFor, NgTemplateOutlet, MatFormFieldModule, i5.MatFormField, MatInputModule, i6.MatInput, i7.CdkTextareaAutosize, TextFieldModule, DatePipe],\n    styles: [\"quick-chat {\\n  z-index: 399;\\n}\\nquick-chat > div {\\n  overflow: hidden;\\n}\\nquick-chat.quick-chat-opened > div {\\n  overflow: visible;\\n}\\nquick-chat:not(.quick-chat-opened) > div {\\n  overflow: visible;\\n  animation: addOverflowHidden 1ms linear 400ms;\\n  animation-fill-mode: forwards;\\n}\\n\\n/* Adjustments depending on the selected layout */\\n.quick-chat-header {\\n  height: 64px;\\n}\\nenterprise-layout .quick-chat-header, modern-layout .quick-chat-header {\\n  height: 80px !important;\\n}\\n\\n/* Overlay */\\n.quick-chat-overlay {\\n  position: fixed;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  z-index: 299;\\n  opacity: 1;\\n  background-color: transparent;\\n}\\n\\n@keyframes addOverflowHidden {\\n  0% {\\n    overflow: visible;\\n  }\\n  99% {\\n    overflow: visible;\\n  }\\n  100% {\\n    overflow: hidden;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbGF5b3V0L2NvbW1vbi9xdWljay1jaGF0L3F1aWNrLWNoYXQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxZQUFBO0FBQ0o7QUFDSTtFQUNJLGdCQUFBO0FBQ1I7QUFJUTtFQUNJLGlCQUFBO0FBRlo7QUFRUTtFQUNJLGlCQUFBO0VBQ0EsNkNBQUE7RUFDQSw2QkFBQTtBQU5aOztBQVdBLGlEQUFBO0FBQ0E7RUFDSSxZQUFBO0FBUko7QUFVSTtFQUVJLHVCQUFBO0FBVFI7O0FBY0EsWUFBQTtBQUNBO0VBQ0ksZUFBQTtFQUNBLE1BQUE7RUFDQSxTQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxZQUFBO0VBQ0EsVUFBQTtFQUNBLDZCQUFBO0FBWEo7O0FBY0E7RUFDSTtJQUNJLGlCQUFBO0VBWE47RUFhRTtJQUNJLGlCQUFBO0VBWE47RUFhRTtJQUNJLGdCQUFBO0VBWE47QUFDRiIsInNvdXJjZXNDb250ZW50IjpbInF1aWNrLWNoYXQge1xuICAgIHotaW5kZXg6IDM5OTtcblxuICAgID4gZGl2IHtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB9XG5cbiAgICAmLnF1aWNrLWNoYXQtb3BlbmVkIHtcblxuICAgICAgICA+IGRpdiB7XG4gICAgICAgICAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICY6bm90KC5xdWljay1jaGF0LW9wZW5lZCkge1xuXG4gICAgICAgID4gZGl2IHtcbiAgICAgICAgICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICAgICAgICAgICAgYW5pbWF0aW9uOiBhZGRPdmVyZmxvd0hpZGRlbiAxbXMgbGluZWFyIDQwMG1zO1xuICAgICAgICAgICAgYW5pbWF0aW9uLWZpbGwtbW9kZTogZm9yd2FyZHM7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qIEFkanVzdG1lbnRzIGRlcGVuZGluZyBvbiB0aGUgc2VsZWN0ZWQgbGF5b3V0ICovXG4ucXVpY2stY2hhdC1oZWFkZXIge1xuICAgIGhlaWdodDogNjRweDtcblxuICAgIGVudGVycHJpc2UtbGF5b3V0ICYsXG4gICAgbW9kZXJuLWxheW91dCAmIHtcbiAgICAgICAgaGVpZ2h0OiA4MHB4ICFpbXBvcnRhbnQ7XG4gICAgfVxufVxuXG5cbi8qIE92ZXJsYXkgKi9cbi5xdWljay1jaGF0LW92ZXJsYXkge1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICB0b3A6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgei1pbmRleDogMjk5O1xuICAgIG9wYWNpdHk6IDE7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG5cbkBrZXlmcmFtZXMgYWRkT3ZlcmZsb3dIaWRkZW4ge1xuICAgIDAlIHtcbiAgICAgICAgb3ZlcmZsb3c6IHZpc2libGVcbiAgICB9XG4gICAgOTklIHtcbiAgICAgICAgb3ZlcmZsb3c6IHZpc2libGU7XG4gICAgfVxuICAgIDEwMCUge1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"],\n    encapsulation: 2\n  });\n}","map":{"version":3,"names":["TextFieldModule","DatePipe","DOCUMENT","NgClass","NgFor","NgIf","NgTemplateOutlet","MatButtonModule","MatFormFieldModule","MatIconModule","MatInputModule","FuseScrollbarDirective","Subject","takeUntil","i0","ɵɵelementContainerStart","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵelementContainerEnd","ɵɵadvance","ɵɵproperty","ctx_r8","chat","contact","avatar","ɵɵsanitizeUrl","ɵɵtextInterpolate1","ctx_r9","name","charAt","ɵɵtemplate","QuickChatComponent_ng_container_4_ng_container_3_Template","QuickChatComponent_ng_container_4_ng_container_4_Template","ctx_r1","ɵɵtextInterpolate","ɵɵclassProp","ctx_r11","selectedChat","id","chat_r10","ɵɵlistener","QuickChatComponent_ng_container_8_Template_div_click_1_listener","restoredCtx","ɵɵrestoreView","_r18","$implicit","ctx_r17","ɵɵnextContext","ɵɵresetView","selectChat","QuickChatComponent_ng_container_8_ng_container_3_Template","QuickChatComponent_ng_container_8_ng_container_4_Template","QuickChatComponent_ng_container_8_ng_container_5_Template","ɵɵpureFunction2","_c1","ctx_r2","unreadCount","ɵɵpipeBind2","message_r21","createdAt","ɵɵelementContainer","QuickChatComponent_ng_container_10_ng_container_3_ng_container_6_ng_container_2_Template","_c2","isMine","_r7","_c3","QuickChatComponent_ng_container_10_ng_container_3_ng_container_1_Template","QuickChatComponent_ng_container_10_ng_container_3_ng_container_6_Template","QuickChatComponent_ng_container_10_ng_container_3_ng_container_8_Template","first_r23","ctx_r19","messages","i_r22","ɵɵpureFunction4","_c4","_c5","last_r24","value","ɵɵsanitizeHtml","QuickChatComponent_ng_container_10_ng_container_3_Template","ctx_r3","trackByFn","ɵɵnamespaceSVG","QuickChatComponent","constructor","_document","_elementRef","_renderer2","_ngZone","_quickChatService","_scrollStrategyOptions","opened","_scrollStrategy","block","_unsubscribeAll","classList","_resizeMessageInput","runOutsideAngular","setTimeout","messageInput","nativeElement","style","height","scrollHeight","ngOnInit","chat$","pipe","subscribe","chats$","chats","ngAfterViewInit","_mutationObserver","MutationObserver","mutations","forEach","mutation","mutationTarget","target","attributeName","contains","top","parseInt","setStyle","Math","abs","observe","documentElement","attributes","attributeFilter","ngOnDestroy","disconnect","next","complete","open","_toggleOpened","close","toggle","getChatById","index","item","_showOverlay","_hideOverlay","_overlay","createElement","add","appendChild","parentElement","enable","addEventListener","parentNode","removeChild","disable","_","ɵɵdirectiveInject","ElementRef","Renderer2","NgZone","i1","QuickChatService","i2","ScrollStrategyOptions","_2","selectors","viewQuery","QuickChatComponent_Query","rf","ctx","QuickChatComponent_ngModelChange_HostBindingHandler","QuickChatComponent_Template_div_click_2_listener","QuickChatComponent_ng_container_3_Template","QuickChatComponent_ng_container_4_Template","QuickChatComponent_ng_container_8_Template","QuickChatComponent_ng_container_10_Template","QuickChatComponent_ng_template_11_Template","ɵɵtemplateRefExtractor","QuickChatComponent_ng_template_13_Template","_c6","ɵɵpureFunction0","_c7","_r5","i3","MatIcon","i4","MatIconButton","i5","MatFormField","i6","MatInput","i7","CdkTextareaAutosize","styles","encapsulation"],"sources":["/Users/tusharphalke/Documents/Freelancing_Work/rrms_frontend/src/app/layout/common/quick-chat/quick-chat.component.ts","/Users/tusharphalke/Documents/Freelancing_Work/rrms_frontend/src/app/layout/common/quick-chat/quick-chat.component.html"],"sourcesContent":["import { ScrollStrategy, ScrollStrategyOptions } from '@angular/cdk/overlay';\nimport { TextFieldModule } from '@angular/cdk/text-field';\nimport { DatePipe, DOCUMENT, NgClass, NgFor, NgIf, NgTemplateOutlet } from '@angular/common';\nimport { AfterViewInit, Component, ElementRef, HostBinding, HostListener, Inject, NgZone, OnDestroy, OnInit, Renderer2, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { FuseScrollbarDirective } from '@fuse/directives/scrollbar';\nimport { QuickChatService } from 'app/layout/common/quick-chat/quick-chat.service';\nimport { Chat } from 'app/layout/common/quick-chat/quick-chat.types';\nimport { Subject, takeUntil } from 'rxjs';\n\n@Component({\n    selector     : 'quick-chat',\n    templateUrl  : './quick-chat.component.html',\n    styleUrls    : ['./quick-chat.component.scss'],\n    encapsulation: ViewEncapsulation.None,\n    exportAs     : 'quickChat',\n    standalone   : true,\n    imports      : [NgClass, NgIf, MatIconModule, MatButtonModule, FuseScrollbarDirective, NgFor, NgTemplateOutlet, MatFormFieldModule, MatInputModule, TextFieldModule, DatePipe],\n})\nexport class QuickChatComponent implements OnInit, AfterViewInit, OnDestroy\n{\n    @ViewChild('messageInput') messageInput: ElementRef;\n    chat: Chat;\n    chats: Chat[];\n    opened: boolean = false;\n    selectedChat: Chat;\n    private _mutationObserver: MutationObserver;\n    private _scrollStrategy: ScrollStrategy = this._scrollStrategyOptions.block();\n    private _overlay: HTMLElement;\n    private _unsubscribeAll: Subject<any> = new Subject<any>();\n\n    /**\n     * Constructor\n     */\n    constructor(\n        @Inject(DOCUMENT) private _document: Document,\n        private _elementRef: ElementRef,\n        private _renderer2: Renderer2,\n        private _ngZone: NgZone,\n        private _quickChatService: QuickChatService,\n        private _scrollStrategyOptions: ScrollStrategyOptions,\n    )\n    {\n    }\n\n    // -----------------------------------------------------------------------------------------------------\n    // @ Decorated methods\n    // -----------------------------------------------------------------------------------------------------\n\n    /**\n     * Host binding for component classes\n     */\n    @HostBinding('class') get classList(): any\n    {\n        return {\n            'quick-chat-opened': this.opened,\n        };\n    }\n\n    /**\n     * Resize on 'input' and 'ngModelChange' events\n     *\n     * @private\n     */\n    @HostListener('input')\n    @HostListener('ngModelChange')\n    private _resizeMessageInput(): void\n    {\n        // This doesn't need to trigger Angular's change detection by itself\n        this._ngZone.runOutsideAngular(() =>\n        {\n            setTimeout(() =>\n            {\n                // Set the height to 'auto' so we can correctly read the scrollHeight\n                this.messageInput.nativeElement.style.height = 'auto';\n\n                // Get the scrollHeight and subtract the vertical padding\n                this.messageInput.nativeElement.style.height = `${this.messageInput.nativeElement.scrollHeight}px`;\n            });\n        });\n    }\n\n    // -----------------------------------------------------------------------------------------------------\n    // @ Lifecycle hooks\n    // -----------------------------------------------------------------------------------------------------\n\n    /**\n     * On init\n     */\n    ngOnInit(): void\n    {\n        // Chat\n        this._quickChatService.chat$\n            .pipe(takeUntil(this._unsubscribeAll))\n            .subscribe((chat: Chat) =>\n            {\n                this.chat = chat;\n            });\n\n        // Chats\n        this._quickChatService.chats$\n            .pipe(takeUntil(this._unsubscribeAll))\n            .subscribe((chats: Chat[]) =>\n            {\n                this.chats = chats;\n            });\n\n        // Selected chat\n        this._quickChatService.chat$\n            .pipe(takeUntil(this._unsubscribeAll))\n            .subscribe((chat: Chat) =>\n            {\n                this.selectedChat = chat;\n            });\n    }\n\n    /**\n     * After view init\n     */\n    ngAfterViewInit(): void\n    {\n        // Fix for Firefox.\n        //\n        // Because 'position: sticky' doesn't work correctly inside a 'position: fixed' parent,\n        // adding the '.cdk-global-scrollblock' to the html element breaks the navigation's position.\n        // This fixes the problem by reading the 'top' value from the html element and adding it as a\n        // 'marginTop' to the navigation itself.\n        this._mutationObserver = new MutationObserver((mutations) =>\n        {\n            mutations.forEach((mutation) =>\n            {\n                const mutationTarget = mutation.target as HTMLElement;\n                if ( mutation.attributeName === 'class' )\n                {\n                    if ( mutationTarget.classList.contains('cdk-global-scrollblock') )\n                    {\n                        const top = parseInt(mutationTarget.style.top, 10);\n                        this._renderer2.setStyle(this._elementRef.nativeElement, 'margin-top', `${Math.abs(top)}px`);\n                    }\n                    else\n                    {\n                        this._renderer2.setStyle(this._elementRef.nativeElement, 'margin-top', null);\n                    }\n                }\n            });\n        });\n        this._mutationObserver.observe(this._document.documentElement, {\n            attributes     : true,\n            attributeFilter: ['class'],\n        });\n    }\n\n    /**\n     * On destroy\n     */\n    ngOnDestroy(): void\n    {\n        // Disconnect the mutation observer\n        this._mutationObserver.disconnect();\n\n        // Unsubscribe from all subscriptions\n        this._unsubscribeAll.next(null);\n        this._unsubscribeAll.complete();\n    }\n\n    // -----------------------------------------------------------------------------------------------------\n    // @ Public methods\n    // -----------------------------------------------------------------------------------------------------\n\n    /**\n     * Open the panel\n     */\n    open(): void\n    {\n        // Return if the panel has already opened\n        if ( this.opened )\n        {\n            return;\n        }\n\n        // Open the panel\n        this._toggleOpened(true);\n    }\n\n    /**\n     * Close the panel\n     */\n    close(): void\n    {\n        // Return if the panel has already closed\n        if ( !this.opened )\n        {\n            return;\n        }\n\n        // Close the panel\n        this._toggleOpened(false);\n    }\n\n    /**\n     * Toggle the panel\n     */\n    toggle(): void\n    {\n        if ( this.opened )\n        {\n            this.close();\n        }\n        else\n        {\n            this.open();\n        }\n    }\n\n    /**\n     * Select the chat\n     *\n     * @param id\n     */\n    selectChat(id: string): void\n    {\n        // Open the panel\n        this._toggleOpened(true);\n\n        // Get the chat data\n        this._quickChatService.getChatById(id).subscribe();\n    }\n\n    /**\n     * Track by function for ngFor loops\n     *\n     * @param index\n     * @param item\n     */\n    trackByFn(index: number, item: any): any\n    {\n        return item.id || index;\n    }\n\n    // -----------------------------------------------------------------------------------------------------\n    // @ Private methods\n    // -----------------------------------------------------------------------------------------------------\n\n    /**\n     * Show the backdrop\n     *\n     * @private\n     */\n    private _showOverlay(): void\n    {\n        // Try hiding the overlay in case there is one already opened\n        this._hideOverlay();\n\n        // Create the backdrop element\n        this._overlay = this._renderer2.createElement('div');\n\n        // Return if overlay couldn't be create for some reason\n        if ( !this._overlay )\n        {\n            return;\n        }\n\n        // Add a class to the backdrop element\n        this._overlay.classList.add('quick-chat-overlay');\n\n        // Append the backdrop to the parent of the panel\n        this._renderer2.appendChild(this._elementRef.nativeElement.parentElement, this._overlay);\n\n        // Enable block scroll strategy\n        this._scrollStrategy.enable();\n\n        // Add an event listener to the overlay\n        this._overlay.addEventListener('click', () =>\n        {\n            this.close();\n        });\n    }\n\n    /**\n     * Hide the backdrop\n     *\n     * @private\n     */\n    private _hideOverlay(): void\n    {\n        if ( !this._overlay )\n        {\n            return;\n        }\n\n        // If the backdrop still exists...\n        if ( this._overlay )\n        {\n            // Remove the backdrop\n            this._overlay.parentNode.removeChild(this._overlay);\n            this._overlay = null;\n        }\n\n        // Disable block scroll strategy\n        this._scrollStrategy.disable();\n    }\n\n    /**\n     * Open/close the panel\n     *\n     * @param open\n     * @private\n     */\n    private _toggleOpened(open: boolean): void\n    {\n        // Set the opened\n        this.opened = open;\n\n        // If the panel opens, show the overlay\n        if ( open )\n        {\n            this._showOverlay();\n        }\n        // Otherwise, hide the overlay\n        else\n        {\n            this._hideOverlay();\n        }\n    }\n}\n","<div class=\"fixed lg:sticky top-0 bottom-0 lg:left-full w-full sm:w-96 lg:w-16 lg:h-screen lg:shadow\">\n    <div\n        class=\"flex flex-col w-full sm:w-96 h-full transition-transform duration-400 ease-drawer bg-card\"\n        [ngClass]=\"{'-translate-x-full sm:-translate-x-96 lg:-translate-x-80 shadow': opened, 'translate-x-0': !opened}\">\n\n        <!-- Header -->\n        <div\n            class=\"quick-chat-header flex flex-0 items-center justify-start cursor-pointer\"\n            (click)=\"toggle()\">\n\n            <!-- Toggle -->\n            <ng-container *ngIf=\"!opened || (opened && !selectedChat)\">\n                <div class=\"flex flex-auto items-center justify-center\">\n                    <div class=\"flex flex-0 items-center justify-center w-16\">\n                        <mat-icon\n                            class=\"icon-size-6\"\n                            [svgIcon]=\"'heroicons_outline:chat-bubble-left-right'\"></mat-icon>\n                    </div>\n                    <div class=\"text-lg font-medium text-secondary\">Team Chat</div>\n                    <button\n                        class=\"ml-auto mr-4\"\n                        mat-icon-button>\n                        <mat-icon [svgIcon]=\"'heroicons_outline:x-mark'\"></mat-icon>\n                    </button>\n                </div>\n            </ng-container>\n\n            <!-- Contact info -->\n            <ng-container *ngIf=\"opened && selectedChat\">\n                <div class=\"flex flex-auto items-center ml-3\">\n                    <div class=\"relative flex flex-0 items-center justify-center w-10 h-10\">\n                        <ng-container *ngIf=\"chat.contact.avatar\">\n                            <img\n                                class=\"w-full h-full rounded-full object-cover\"\n                                [src]=\"chat.contact.avatar\"\n                                alt=\"Contact avatar\"/>\n                        </ng-container>\n                        <ng-container *ngIf=\"!chat.contact.avatar\">\n                            <div class=\"flex items-center justify-center w-full h-full rounded-full text-lg uppercase bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200\">\n                                {{chat.contact.name.charAt(0)}}\n                            </div>\n                        </ng-container>\n                    </div>\n                    <div class=\"ml-4 text-lg font-medium leading-5 truncate\">{{chat.contact.name}}</div>\n                    <button\n                        class=\"ml-auto mr-4\"\n                        mat-icon-button>\n                        <mat-icon [svgIcon]=\"'heroicons_outline:x-mark'\"></mat-icon>\n                    </button>\n                </div>\n            </ng-container>\n        </div>\n\n        <!-- Content -->\n        <div class=\"flex flex-auto border-t overflow-hidden\">\n\n            <!-- Chat list -->\n            <div\n                class=\"flex-0 w-16 h-full overflow-y-auto overscroll-y-contain sm:overflow-hidden sm:overscroll-auto\"\n                fuseScrollbar\n                [fuseScrollbarOptions]=\"{wheelPropagation: false}\">\n                <div class=\"flex-auto\">\n                    <ng-container *ngFor=\"let chat of chats; trackBy: trackByFn\">\n                        <div\n                            class=\"flex items-center py-3 px-4 cursor-pointer\"\n                            [ngClass]=\"{'hover:bg-gray-100 dark:hover:bg-hover': !selectedChat || selectedChat.id !== chat.id,\n                                        'bg-primary-50 dark:bg-hover': selectedChat && selectedChat.id === chat.id}\"\n                            (click)=\"selectChat(chat.id)\">\n                            <div class=\"relative flex flex-0 items-center justify-center w-8 h-8\">\n                                <ng-container *ngIf=\"chat.unreadCount > 0\">\n                                    <div\n                                        class=\"absolute bottom-0 right-0 flex-0 w-2 h-2 -ml-0.5 rounded-full ring-2 ring-bg-card dark:ring-gray-900 bg-primary dark:bg-primary-500 text-on-primary\"\n                                        [class.ring-primary-50]=\"selectedChat && selectedChat.id === chat.id\"></div>\n                                </ng-container>\n                                <ng-container *ngIf=\"chat.contact.avatar\">\n                                    <img\n                                        class=\"w-full h-full rounded-full object-cover\"\n                                        [src]=\"chat.contact.avatar\"\n                                        alt=\"Contact avatar\"/>\n                                </ng-container>\n                                <ng-container *ngIf=\"!chat.contact.avatar\">\n                                    <div class=\"flex items-center justify-center w-full h-full rounded-full text-lg uppercase bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200\">\n                                        {{chat.contact.name.charAt(0)}}\n                                    </div>\n                                </ng-container>\n                            </div>\n                        </div>\n                    </ng-container>\n                </div>\n            </div>\n\n            <!-- Conversation -->\n            <div class=\"flex flex-col flex-auto border-l overflow-hidden bg-gray-50 dark:bg-transparent\">\n                <ng-container *ngIf=\"chat; else selectChatOrStartNew\">\n                    <div class=\"flex flex-col-reverse overflow-y-auto overscroll-y-contain\">\n                        <div class=\"flex flex-col flex-auto shrink p-6\">\n                            <ng-container *ngFor=\"let message of chat.messages; let i = index; let first = first; let last = last; trackBy: trackByFn\">\n                                <!-- Start of the day -->\n                                <ng-container *ngIf=\"first || (chat.messages[i - 1].createdAt | date:'d') !== (message.createdAt | date:'d')\">\n                                    <div class=\"flex items-center justify-center my-3 -mx-6\">\n                                        <div class=\"flex-auto border-b\"></div>\n                                        <div class=\"flex-0 mx-4 text-sm font-medium leading-5 text-secondary\">\n                                            {{message.createdAt | date: 'longDate'}}\n                                        </div>\n                                        <div class=\"flex-auto border-b\"></div>\n                                    </div>\n                                </ng-container>\n                                <div\n                                    class=\"flex flex-col\"\n                                    [ngClass]=\"{'items-end': message.isMine,\n                                                'items-start': !message.isMine,\n                                                'mt-0.5': i > 0 && chat.messages[i - 1].isMine === message.isMine,\n                                                'mt-3': i > 0 && chat.messages[i - 1].isMine !== message.isMine}\">\n                                    <!-- Bubble -->\n                                    <div\n                                        class=\"relative max-w-3/4 px-3 py-2 rounded-lg\"\n                                        [ngClass]=\"{'bg-blue-500 text-blue-50': message.isMine,\n                                                    'bg-gray-500 text-gray-50': !message.isMine}\">\n                                        <!-- Speech bubble tail -->\n                                        <ng-container *ngIf=\"last || chat.messages[i + 1].isMine !== message.isMine\">\n                                            <div\n                                                class=\"absolute bottom-0 w-3\"\n                                                [ngClass]=\"{'text-blue-500 -right-1 -mr-px mb-px': message.isMine,\n                                                            'text-gray-500 -left-1 -ml-px mb-px -scale-x-1': !message.isMine}\">\n                                                <ng-container *ngTemplateOutlet=\"speechBubbleExtension\"></ng-container>\n                                            </div>\n                                        </ng-container>\n                                        <!-- Message -->\n                                        <div\n                                            class=\"min-w-4 leading-5\"\n                                            [innerHTML]=\"message.value\">\n                                        </div>\n                                    </div>\n                                    <!-- Time -->\n                                    <ng-container\n                                        *ngIf=\"first\n                                       || last\n                                       || chat.messages[i + 1].isMine !== message.isMine\n                                       || chat.messages[i + 1].createdAt !== message.createdAt\">\n                                        <div\n                                            class=\"my-0.5 text-sm font-medium text-secondary\"\n                                            [ngClass]=\"{'mr-3': message.isMine,\n                                                        'ml-3': !message.isMine}\">\n                                            {{message.createdAt | date:'HH:mm'}}\n                                        </div>\n                                    </ng-container>\n                                </div>\n                            </ng-container>\n                        </div>\n                    </div>\n\n                    <!-- Message field -->\n                    <div class=\"flex items-end p-4 border-t bg-gray-50 dark:bg-transparent\">\n                        <mat-form-field\n                            class=\"fuse-mat-dense fuse-mat-rounded fuse-mat-bold w-full\"\n                            [subscriptSizing]=\"'dynamic'\">\n                            <textarea\n                                matInput\n                                cdkTextareaAutosize\n                                #messageInput></textarea>\n                        </mat-form-field>\n                        <div class=\"flex items-center h-11 my-px ml-4\">\n                            <button\n                                mat-icon-button>\n                                <mat-icon [svgIcon]=\"'heroicons_outline:paper-airplane'\"></mat-icon>\n                            </button>\n                        </div>\n                    </div>\n                </ng-container>\n            </div>\n        </div>\n    </div>\n</div>\n\n<!-- Select chat or start new template -->\n<ng-template #selectChatOrStartNew>\n    <div class=\"flex flex-col flex-auto items-center justify-center w-full h-full p-4\">\n        <mat-icon\n            class=\"icon-size-24\"\n            [svgIcon]=\"'heroicons_outline:chat-bubble-bottom-center-text'\"></mat-icon>\n        <div class=\"mt-4 text-xl text-center font-medium tracking-tight text-secondary\">Select a conversation</div>\n    </div>\n</ng-template>\n\n<!-- Speech bubble tail SVG -->\n<!-- @formatter:off -->\n<ng-template #speechBubbleExtension>\n    <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 66 66\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <path d=\"M1.01522827,0.516204834 C-8.83532715,54.3062744 61.7609863,70.5215302 64.8009949,64.3061218 C68.8074951,54.8859711 30.1663208,52.9997559 37.5036011,0.516204834 L1.01522827,0.516204834 Z\" fill=\"currentColor\" fill-rule=\"nonzero\"></path>\n        </g>\n    </svg>\n</ng-template>\n<!-- @formatter:on -->\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}