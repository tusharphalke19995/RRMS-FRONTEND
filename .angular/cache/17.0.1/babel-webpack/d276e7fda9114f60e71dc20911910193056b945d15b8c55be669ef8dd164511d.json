{"ast":null,"code":"import { chats as chatsData, contacts as contactsData, messages as messagesData, profile as profileData } from 'app/mock-api/apps/chat/data';\nimport { assign, cloneDeep, omit } from 'lodash-es';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@fuse/lib/mock-api\";\nexport class ChatMockApi {\n  /**\n   * Constructor\n   */\n  constructor(_fuseMockApiService) {\n    this._fuseMockApiService = _fuseMockApiService;\n    this._chats = chatsData;\n    this._contacts = contactsData;\n    this._messages = messagesData;\n    this._profile = profileData;\n    // Register Mock API handlers\n    this.registerHandlers();\n    // Modify the chats array to attach certain data to it\n    this._chats = this._chats.map(chat => ({\n      ...chat,\n      // Get the actual contact object from the id and attach it to the chat\n      contact: this._contacts.find(contact => contact.id === chat.contactId),\n      // Since we use same set of messages on all chats, we assign them here.\n      messages: this._messages.map(message => ({\n        ...message,\n        chatId: chat.id,\n        contactId: message.contactId === 'me' ? this._profile.id : chat.contactId,\n        isMine: message.contactId === 'me'\n      }))\n    }));\n  }\n  // -----------------------------------------------------------------------------------------------------\n  // @ Public methods\n  // -----------------------------------------------------------------------------------------------------\n  /**\n   * Register Mock API handlers\n   */\n  registerHandlers() {\n    // -----------------------------------------------------------------------------------------------------\n    // @ Chats - GET\n    // -----------------------------------------------------------------------------------------------------\n    this._fuseMockApiService.onGet('api/apps/chat/chats').reply(() => {\n      // Clone the chats\n      const chats = cloneDeep(this._chats);\n      // Return the response\n      return [200, chats];\n    });\n    // -----------------------------------------------------------------------------------------------------\n    // @ Chat - GET\n    // -----------------------------------------------------------------------------------------------------\n    this._fuseMockApiService.onGet('api/apps/chat/chat').reply(({\n      request\n    }) => {\n      // Get the chat id\n      const id = request.params.get('id');\n      // Clone the chats\n      const chats = cloneDeep(this._chats);\n      // Find the chat we need\n      const chat = chats.find(item => item.id === id);\n      // Return the response\n      return [200, chat];\n    });\n    // -----------------------------------------------------------------------------------------------------\n    // @ Chat - PATCH\n    // -----------------------------------------------------------------------------------------------------\n    this._fuseMockApiService.onPatch('api/apps/chat/chat').reply(({\n      request\n    }) => {\n      // Get the id and chat\n      const id = request.body.id;\n      const chat = cloneDeep(request.body.chat);\n      // Prepare the updated chat\n      let updatedChat = null;\n      // Find the chat and update it\n      this._chats.forEach((item, index, chats) => {\n        if (item.id === id) {\n          // Update the chat\n          chats[index] = assign({}, chats[index], chat);\n          // Store the updated chat\n          updatedChat = chats[index];\n        }\n      });\n      // Return the response\n      return [200, updatedChat];\n    });\n    // -----------------------------------------------------------------------------------------------------\n    // @ Contacts - GET\n    // -----------------------------------------------------------------------------------------------------\n    this._fuseMockApiService.onGet('api/apps/chat/contacts').reply(() => {\n      // Clone the contacts\n      let contacts = cloneDeep(this._contacts);\n      // Sort the contacts by the name field by default\n      contacts.sort((a, b) => a.name.localeCompare(b.name));\n      // Omit details and attachments from contacts\n      contacts = contacts.map(contact => omit(contact, ['details', 'attachments']));\n      // Return the response\n      return [200, contacts];\n    });\n    // -----------------------------------------------------------------------------------------------------\n    // @ Contact Details - GET\n    // -----------------------------------------------------------------------------------------------------\n    this._fuseMockApiService.onGet('api/apps/chat/contact').reply(({\n      request\n    }) => {\n      // Get the contact id\n      const id = request.params.get('id');\n      // Clone the contacts\n      const contacts = cloneDeep(this._contacts);\n      // Find the contact\n      const contact = contacts.find(item => item.id === id);\n      // Return the response\n      return [200, contact];\n    });\n    // -----------------------------------------------------------------------------------------------------\n    // @ Profile - GET\n    // -----------------------------------------------------------------------------------------------------\n    this._fuseMockApiService.onGet('api/apps/chat/profile').reply(() => {\n      // Clone the profile\n      const profile = cloneDeep(this._profile);\n      // Return the response\n      return [200, profile];\n    });\n  }\n  static #_ = this.ɵfac = function ChatMockApi_Factory(t) {\n    return new (t || ChatMockApi)(i0.ɵɵinject(i1.FuseMockApiService));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: ChatMockApi,\n    factory: ChatMockApi.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["chats","chatsData","contacts","contactsData","messages","messagesData","profile","profileData","assign","cloneDeep","omit","ChatMockApi","constructor","_fuseMockApiService","_chats","_contacts","_messages","_profile","registerHandlers","map","chat","contact","find","id","contactId","message","chatId","isMine","onGet","reply","request","params","get","item","onPatch","body","updatedChat","forEach","index","sort","a","b","name","localeCompare","_","i0","ɵɵinject","i1","FuseMockApiService","_2","factory","ɵfac","providedIn"],"sources":["/Users/tusharphalke/Documents/Freelancing_Work/rrms_frontend/src/app/mock-api/apps/chat/api.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { FuseMockApiService } from '@fuse/lib/mock-api';\nimport { chats as chatsData, contacts as contactsData, messages as messagesData, profile as profileData } from 'app/mock-api/apps/chat/data';\nimport { assign, cloneDeep, omit } from 'lodash-es';\n\n@Injectable({providedIn: 'root'})\nexport class ChatMockApi\n{\n    private _chats: any[] = chatsData;\n    private _contacts: any[] = contactsData;\n    private _messages: any[] = messagesData;\n    private _profile: any = profileData;\n\n    /**\n     * Constructor\n     */\n    constructor(private _fuseMockApiService: FuseMockApiService)\n    {\n        // Register Mock API handlers\n        this.registerHandlers();\n\n        // Modify the chats array to attach certain data to it\n        this._chats = this._chats.map(chat => ({\n            ...chat,\n            // Get the actual contact object from the id and attach it to the chat\n            contact: this._contacts.find(contact => contact.id === chat.contactId),\n            // Since we use same set of messages on all chats, we assign them here.\n            messages: this._messages.map(message => ({\n                ...message,\n                chatId   : chat.id,\n                contactId: message.contactId === 'me' ? this._profile.id : chat.contactId,\n                isMine   : message.contactId === 'me',\n            })),\n        }));\n    }\n\n    // -----------------------------------------------------------------------------------------------------\n    // @ Public methods\n    // -----------------------------------------------------------------------------------------------------\n\n    /**\n     * Register Mock API handlers\n     */\n    registerHandlers(): void\n    {\n        // -----------------------------------------------------------------------------------------------------\n        // @ Chats - GET\n        // -----------------------------------------------------------------------------------------------------\n        this._fuseMockApiService\n            .onGet('api/apps/chat/chats')\n            .reply(() =>\n            {\n                // Clone the chats\n                const chats = cloneDeep(this._chats);\n\n                // Return the response\n                return [200, chats];\n            });\n\n        // -----------------------------------------------------------------------------------------------------\n        // @ Chat - GET\n        // -----------------------------------------------------------------------------------------------------\n        this._fuseMockApiService\n            .onGet('api/apps/chat/chat')\n            .reply(({request}) =>\n            {\n                // Get the chat id\n                const id = request.params.get('id');\n\n                // Clone the chats\n                const chats = cloneDeep(this._chats);\n\n                // Find the chat we need\n                const chat = chats.find(item => item.id === id);\n\n                // Return the response\n                return [200, chat];\n            });\n\n        // -----------------------------------------------------------------------------------------------------\n        // @ Chat - PATCH\n        // -----------------------------------------------------------------------------------------------------\n        this._fuseMockApiService\n            .onPatch('api/apps/chat/chat')\n            .reply(({request}) =>\n            {\n                // Get the id and chat\n                const id = request.body.id;\n                const chat = cloneDeep(request.body.chat);\n\n                // Prepare the updated chat\n                let updatedChat = null;\n\n                // Find the chat and update it\n                this._chats.forEach((item, index, chats) =>\n                {\n                    if ( item.id === id )\n                    {\n                        // Update the chat\n                        chats[index] = assign({}, chats[index], chat);\n\n                        // Store the updated chat\n                        updatedChat = chats[index];\n                    }\n                });\n\n                // Return the response\n                return [200, updatedChat];\n            });\n\n        // -----------------------------------------------------------------------------------------------------\n        // @ Contacts - GET\n        // -----------------------------------------------------------------------------------------------------\n        this._fuseMockApiService\n            .onGet('api/apps/chat/contacts')\n            .reply(() =>\n            {\n                // Clone the contacts\n                let contacts = cloneDeep(this._contacts);\n\n                // Sort the contacts by the name field by default\n                contacts.sort((a, b) => a.name.localeCompare(b.name));\n\n                // Omit details and attachments from contacts\n                contacts = contacts.map(contact => omit(contact, ['details', 'attachments']));\n\n                // Return the response\n                return [200, contacts];\n            });\n\n        // -----------------------------------------------------------------------------------------------------\n        // @ Contact Details - GET\n        // -----------------------------------------------------------------------------------------------------\n        this._fuseMockApiService\n            .onGet('api/apps/chat/contact')\n            .reply(({request}) =>\n            {\n                // Get the contact id\n                const id = request.params.get('id');\n\n                // Clone the contacts\n                const contacts = cloneDeep(this._contacts);\n\n                // Find the contact\n                const contact = contacts.find(item => item.id === id);\n\n                // Return the response\n                return [200, contact];\n            });\n\n        // -----------------------------------------------------------------------------------------------------\n        // @ Profile - GET\n        // -----------------------------------------------------------------------------------------------------\n        this._fuseMockApiService\n            .onGet('api/apps/chat/profile')\n            .reply(() =>\n            {\n                // Clone the profile\n                const profile = cloneDeep(this._profile);\n\n                // Return the response\n                return [200, profile];\n            });\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}