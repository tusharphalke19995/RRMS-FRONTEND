{"ast":null,"code":"import { TemplatePortal } from '@angular/cdk/portal';\nimport { DatePipe, NgClass, NgFor, NgIf, NgTemplateOutlet } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { RouterLink } from '@angular/router';\nimport { Subject, takeUntil } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/layout/common/messages/messages.service\";\nimport * as i2 from \"@angular/cdk/overlay\";\nimport * as i3 from \"@angular/material/button\";\nimport * as i4 from \"@angular/material/icon\";\nimport * as i5 from \"@angular/material/tooltip\";\nconst _c0 = [\"messagesOrigin\"];\nconst _c1 = [\"messagesPanel\"];\nfunction MessagesComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"span\", 5)(2, \"span\", 6);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.unreadCount, \" \");\n  }\n}\nfunction MessagesComponent_ng_template_4_ng_container_11_ng_container_2_ng_container_1_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction MessagesComponent_ng_template_4_ng_container_11_ng_container_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"a\", 23);\n    i0.ɵɵtemplate(2, MessagesComponent_ng_template_4_ng_container_11_ng_container_2_ng_container_1_ng_container_2_Template, 1, 0, \"ng-container\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const message_r6 = i0.ɵɵnextContext(2).$implicit;\n    const _r10 = i0.ɵɵreference(10);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"href\", message_r6.link, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r10);\n  }\n}\nfunction MessagesComponent_ng_template_4_ng_container_11_ng_container_2_ng_container_2_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction MessagesComponent_ng_template_4_ng_container_11_ng_container_2_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"a\", 25);\n    i0.ɵɵtemplate(2, MessagesComponent_ng_template_4_ng_container_11_ng_container_2_ng_container_2_ng_container_2_Template, 1, 0, \"ng-container\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const message_r6 = i0.ɵɵnextContext(2).$implicit;\n    const _r10 = i0.ɵɵreference(10);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", message_r6.link);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r10);\n  }\n}\nfunction MessagesComponent_ng_template_4_ng_container_11_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MessagesComponent_ng_template_4_ng_container_11_ng_container_2_ng_container_1_Template, 3, 2, \"ng-container\", 2)(2, MessagesComponent_ng_template_4_ng_container_11_ng_container_2_ng_container_2_Template, 3, 2, \"ng-container\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const message_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !message_r6.useRouter);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", message_r6.useRouter);\n  }\n}\nfunction MessagesComponent_ng_template_4_ng_container_11_ng_container_3_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction MessagesComponent_ng_template_4_ng_container_11_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 26);\n    i0.ɵɵtemplate(2, MessagesComponent_ng_template_4_ng_container_11_ng_container_3_ng_container_2_Template, 1, 0, \"ng-container\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r10 = i0.ɵɵreference(10);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r10);\n  }\n}\nfunction MessagesComponent_ng_template_4_ng_container_11_ng_template_9_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 29);\n    i0.ɵɵelement(2, \"mat-icon\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const message_r6 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"svgIcon\", message_r6.icon);\n  }\n}\nfunction MessagesComponent_ng_template_4_ng_container_11_ng_template_9_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"img\", 31);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const message_r6 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", message_r6.image, i0.ɵɵsanitizeUrl)(\"alt\", \"Message image\");\n  }\n}\nfunction MessagesComponent_ng_template_4_ng_container_11_ng_template_9_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"div\", 32);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const message_r6 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", message_r6.title, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction MessagesComponent_ng_template_4_ng_container_11_ng_template_9_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"div\", 33);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const message_r6 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", message_r6.description, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction MessagesComponent_ng_template_4_ng_container_11_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, MessagesComponent_ng_template_4_ng_container_11_ng_template_9_ng_container_0_Template, 3, 1, \"ng-container\", 2)(1, MessagesComponent_ng_template_4_ng_container_11_ng_template_9_ng_container_1_Template, 2, 2, \"ng-container\", 2);\n    i0.ɵɵelementStart(2, \"div\", 27);\n    i0.ɵɵtemplate(3, MessagesComponent_ng_template_4_ng_container_11_ng_template_9_ng_container_3_Template, 2, 1, \"ng-container\", 2)(4, MessagesComponent_ng_template_4_ng_container_11_ng_template_9_ng_container_4_Template, 2, 1, \"ng-container\", 2);\n    i0.ɵɵelementStart(5, \"div\", 28);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const message_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngIf\", message_r6.icon && !message_r6.image);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", message_r6.image);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", message_r6.title);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", message_r6.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(7, 5, message_r6.time, \"MMM dd, h:mm a\"), \" \");\n  }\n}\nconst _c2 = a0 => ({\n  \"unread\": a0\n});\nconst _c3 = (a0, a1) => ({\n  \"bg-gray-400 dark:bg-gray-500 sm:opacity-0 sm:group-hover:opacity-100\": a0,\n  \"bg-primary\": a1\n});\nfunction MessagesComponent_ng_template_4_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 16);\n    i0.ɵɵtemplate(2, MessagesComponent_ng_template_4_ng_container_11_ng_container_2_Template, 3, 2, \"ng-container\", 2)(3, MessagesComponent_ng_template_4_ng_container_11_ng_container_3_Template, 3, 1, \"ng-container\", 2);\n    i0.ɵɵelementStart(4, \"div\", 17)(5, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function MessagesComponent_ng_template_4_ng_container_11_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r29);\n      const message_r6 = restoredCtx.$implicit;\n      const ctx_r28 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r28.toggleRead(message_r6));\n    });\n    i0.ɵɵelement(6, \"span\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function MessagesComponent_ng_template_4_ng_container_11_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r29);\n      const message_r6 = restoredCtx.$implicit;\n      const ctx_r30 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r30.delete(message_r6));\n    });\n    i0.ɵɵelement(8, \"mat-icon\", 21);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(9, MessagesComponent_ng_template_4_ng_container_11_ng_template_9_Template, 8, 8, \"ng-template\", null, 22, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const message_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c2, !message_r6.read));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", message_r6.link);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !message_r6.link);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"matTooltip\", message_r6.read ? \"Mark as unread\" : \"Mark as read\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(9, _c3, message_r6.read, !message_r6.read));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matTooltip\", \"Remove\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"svgIcon\", \"heroicons_solid:x-mark\");\n  }\n}\nfunction MessagesComponent_ng_template_4_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 34)(2, \"div\", 35);\n    i0.ɵɵelement(3, \"mat-icon\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 37);\n    i0.ɵɵtext(5, \"No messages\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 38);\n    i0.ɵɵtext(7, \"When you have messages, they will appear here.\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"svgIcon\", \"heroicons_outline:inbox\");\n  }\n}\nfunction MessagesComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8)(2, \"div\", 9)(3, \"button\", 0);\n    i0.ɵɵlistener(\"click\", function MessagesComponent_ng_template_4_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r31.closePanel());\n    });\n    i0.ɵɵelement(4, \"mat-icon\", 10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 11);\n    i0.ɵɵtext(6, \"Messages\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 12)(8, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function MessagesComponent_ng_template_4_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r33.markAllAsRead());\n    });\n    i0.ɵɵelement(9, \"mat-icon\", 10);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(10, \"div\", 14);\n    i0.ɵɵtemplate(11, MessagesComponent_ng_template_4_ng_container_11_Template, 11, 12, \"ng-container\", 15)(12, MessagesComponent_ng_template_4_ng_container_12_Template, 8, 1, \"ng-container\", 2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"svgIcon\", \"heroicons_solid:x-mark\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", ctx_r2.unreadCount === 0)(\"matTooltip\", \"Mark all as read\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"svgIcon\", \"heroicons_solid:envelope-open\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.messages)(\"ngForTrackBy\", ctx_r2.trackByFn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.messages || !ctx_r2.messages.length);\n  }\n}\nexport class MessagesComponent {\n  /**\n   * Constructor\n   */\n  constructor(_changeDetectorRef, _messagesService, _overlay, _viewContainerRef) {\n    this._changeDetectorRef = _changeDetectorRef;\n    this._messagesService = _messagesService;\n    this._overlay = _overlay;\n    this._viewContainerRef = _viewContainerRef;\n    this.unreadCount = 0;\n    this._unsubscribeAll = new Subject();\n  }\n  // -----------------------------------------------------------------------------------------------------\n  // @ Lifecycle hooks\n  // -----------------------------------------------------------------------------------------------------\n  /**\n   * On init\n   */\n  ngOnInit() {\n    // Subscribe to message changes\n    this._messagesService.messages$.pipe(takeUntil(this._unsubscribeAll)).subscribe(messages => {\n      // Load the messages\n      this.messages = messages;\n      // Calculate the unread count\n      this._calculateUnreadCount();\n      // Mark for check\n      this._changeDetectorRef.markForCheck();\n    });\n  }\n  /**\n   * On destroy\n   */\n  ngOnDestroy() {\n    // Unsubscribe from all subscriptions\n    this._unsubscribeAll.next(null);\n    this._unsubscribeAll.complete();\n    // Dispose the overlay\n    if (this._overlayRef) {\n      this._overlayRef.dispose();\n    }\n  }\n  // -----------------------------------------------------------------------------------------------------\n  // @ Public methods\n  // -----------------------------------------------------------------------------------------------------\n  /**\n   * Open the messages panel\n   */\n  openPanel() {\n    // Return if the messages panel or its origin is not defined\n    if (!this._messagesPanel || !this._messagesOrigin) {\n      return;\n    }\n    // Create the overlay if it doesn't exist\n    if (!this._overlayRef) {\n      this._createOverlay();\n    }\n    // Attach the portal to the overlay\n    this._overlayRef.attach(new TemplatePortal(this._messagesPanel, this._viewContainerRef));\n  }\n  /**\n   * Close the messages panel\n   */\n  closePanel() {\n    this._overlayRef.detach();\n  }\n  /**\n   * Mark all messages as read\n   */\n  markAllAsRead() {\n    // Mark all as read\n    this._messagesService.markAllAsRead().subscribe();\n  }\n  /**\n   * Toggle read status of the given message\n   */\n  toggleRead(message) {\n    // Toggle the read status\n    message.read = !message.read;\n    // Update the message\n    this._messagesService.update(message.id, message).subscribe();\n  }\n  /**\n   * Delete the given message\n   */\n  delete(message) {\n    // Delete the message\n    this._messagesService.delete(message.id).subscribe();\n  }\n  /**\n   * Track by function for ngFor loops\n   *\n   * @param index\n   * @param item\n   */\n  trackByFn(index, item) {\n    return item.id || index;\n  }\n  // -----------------------------------------------------------------------------------------------------\n  // @ Private methods\n  // -----------------------------------------------------------------------------------------------------\n  /**\n   * Create the overlay\n   */\n  _createOverlay() {\n    // Create the overlay\n    this._overlayRef = this._overlay.create({\n      hasBackdrop: true,\n      backdropClass: 'fuse-backdrop-on-mobile',\n      scrollStrategy: this._overlay.scrollStrategies.block(),\n      positionStrategy: this._overlay.position().flexibleConnectedTo(this._messagesOrigin._elementRef.nativeElement).withLockedPosition(true).withPush(true).withPositions([{\n        originX: 'start',\n        originY: 'bottom',\n        overlayX: 'start',\n        overlayY: 'top'\n      }, {\n        originX: 'start',\n        originY: 'top',\n        overlayX: 'start',\n        overlayY: 'bottom'\n      }, {\n        originX: 'end',\n        originY: 'bottom',\n        overlayX: 'end',\n        overlayY: 'top'\n      }, {\n        originX: 'end',\n        originY: 'top',\n        overlayX: 'end',\n        overlayY: 'bottom'\n      }])\n    });\n    // Detach the overlay from the portal on backdrop click\n    this._overlayRef.backdropClick().subscribe(() => {\n      this._overlayRef.detach();\n    });\n  }\n  /**\n   * Calculate the unread count\n   *\n   * @private\n   */\n  _calculateUnreadCount() {\n    let count = 0;\n    if (this.messages && this.messages.length) {\n      count = this.messages.filter(message => !message.read).length;\n    }\n    this.unreadCount = count;\n  }\n  static #_ = this.ɵfac = function MessagesComponent_Factory(t) {\n    return new (t || MessagesComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.MessagesService), i0.ɵɵdirectiveInject(i2.Overlay), i0.ɵɵdirectiveInject(i0.ViewContainerRef));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MessagesComponent,\n    selectors: [[\"messages\"]],\n    viewQuery: function MessagesComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._messagesOrigin = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._messagesPanel = _t.first);\n      }\n    },\n    exportAs: [\"messages\"],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 6,\n    vars: 2,\n    consts: [[\"mat-icon-button\", \"\", 3, \"click\"], [\"messagesOrigin\", \"\"], [4, \"ngIf\"], [3, \"svgIcon\"], [\"messagesPanel\", \"\"], [1, \"absolute\", \"top-0\", \"right-0\", \"left-0\", \"flex\", \"items-center\", \"justify-center\", \"h-3\"], [1, \"flex\", \"items-center\", \"justify-center\", \"shrink-0\", \"min-w-4\", \"h-4\", \"px-1\", \"ml-4\", \"mt-2.5\", \"rounded-full\", \"bg-indigo-600\", \"text-indigo-50\", \"text-xs\", \"font-medium\"], [1, \"fixed\", \"inset-0\", \"sm:static\", \"sm:inset-auto\", \"flex\", \"flex-col\", \"sm:min-w-90\", \"sm:w-90\", \"sm:rounded-2xl\", \"overflow-hidden\", \"shadow-lg\"], [1, \"flex\", \"shrink-0\", \"items-center\", \"py-4\", \"pr-4\", \"pl-6\", \"bg-primary\", \"text-on-primary\"], [1, \"sm:hidden\", \"-ml-1\", \"mr-3\"], [1, \"icon-size-5\", \"text-current\", 3, \"svgIcon\"], [1, \"text-lg\", \"font-medium\", \"leading-10\"], [1, \"ml-auto\"], [\"mat-icon-button\", \"\", 3, \"disabled\", \"matTooltip\", \"click\"], [1, \"relative\", \"flex\", \"flex-col\", \"flex-auto\", \"sm:max-h-120\", \"divide-y\", \"overflow-y-auto\", \"bg-card\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"flex\", \"group\", \"hover:bg-gray-50\", \"dark:hover:bg-black\", \"dark:hover:bg-opacity-5\", 3, \"ngClass\"], [1, \"relative\", \"flex\", \"flex-col\", \"my-5\", \"mr-6\", \"ml-2\"], [\"mat-icon-button\", \"\", 1, \"w-6\", \"h-6\", \"min-h-6\", 3, \"matTooltip\", \"click\"], [1, \"w-2\", \"h-2\", \"rounded-full\", 3, \"ngClass\"], [\"mat-icon-button\", \"\", 1, \"w-6\", \"h-6\", \"min-h-6\", \"sm:opacity-0\", \"sm:group-hover:opacity-100\", 3, \"matTooltip\", \"click\"], [1, \"icon-size-4\", 3, \"svgIcon\"], [\"messageContent\", \"\"], [1, \"flex\", \"flex-auto\", \"py-5\", \"pl-6\", \"cursor-pointer\", 3, \"href\"], [4, \"ngTemplateOutlet\"], [1, \"flex\", \"flex-auto\", \"py-5\", \"pl-6\", \"cursor-pointer\", 3, \"routerLink\"], [1, \"flex\", \"flex-auto\", \"py-5\", \"pl-6\"], [1, \"flex\", \"flex-col\", \"flex-auto\"], [1, \"mt-2\", \"text-sm\", \"leading-none\", \"text-secondary\"], [1, \"flex\", \"shrink-0\", \"items-center\", \"justify-center\", \"w-8\", \"h-8\", \"mr-4\", \"rounded-full\", \"bg-gray-100\", \"dark:bg-gray-700\"], [1, \"icon-size-5\", 3, \"svgIcon\"], [1, \"shrink-0\", \"w-8\", \"h-8\", \"mr-4\", \"rounded-full\", \"overflow-hidden\", \"object-cover\", \"object-center\", 3, \"src\", \"alt\"], [1, \"font-semibold\", \"line-clamp-1\", 3, \"innerHTML\"], [1, \"line-clamp-2\", 3, \"innerHTML\"], [1, \"flex\", \"flex-col\", \"flex-auto\", \"items-center\", \"justify-center\", \"sm:justify-start\", \"py-12\", \"px-8\"], [1, \"flex\", \"flex-0\", \"items-center\", \"justify-center\", \"w-14\", \"h-14\", \"rounded-full\", \"bg-primary-100\", \"dark:bg-primary-600\"], [1, \"text-primary-700\", \"dark:text-primary-50\", 3, \"svgIcon\"], [1, \"mt-5\", \"text-2xl\", \"font-semibold\", \"tracking-tight\"], [1, \"w-full\", \"max-w-60\", \"mt-1\", \"text-md\", \"text-center\", \"text-secondary\"]],\n    template: function MessagesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"button\", 0, 1);\n        i0.ɵɵlistener(\"click\", function MessagesComponent_Template_button_click_0_listener() {\n          return ctx.openPanel();\n        });\n        i0.ɵɵtemplate(2, MessagesComponent_ng_container_2_Template, 4, 1, \"ng-container\", 2);\n        i0.ɵɵelement(3, \"mat-icon\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, MessagesComponent_ng_template_4_Template, 13, 7, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.unreadCount > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"svgIcon\", \"heroicons_outline:inbox\");\n      }\n    },\n    dependencies: [MatButtonModule, i3.MatIconButton, NgIf, MatIconModule, i4.MatIcon, MatTooltipModule, i5.MatTooltip, NgFor, NgClass, NgTemplateOutlet, RouterLink, DatePipe],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n}","map":{"version":3,"names":["TemplatePortal","DatePipe","NgClass","NgFor","NgIf","NgTemplateOutlet","MatButtonModule","MatIconModule","MatTooltipModule","RouterLink","Subject","takeUntil","i0","ɵɵelementContainerStart","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelementContainerEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r1","unreadCount","ɵɵelementContainer","ɵɵtemplate","MessagesComponent_ng_template_4_ng_container_11_ng_container_2_ng_container_1_ng_container_2_Template","ɵɵproperty","message_r6","link","ɵɵsanitizeUrl","_r10","MessagesComponent_ng_template_4_ng_container_11_ng_container_2_ng_container_2_ng_container_2_Template","MessagesComponent_ng_template_4_ng_container_11_ng_container_2_ng_container_1_Template","MessagesComponent_ng_template_4_ng_container_11_ng_container_2_ng_container_2_Template","useRouter","MessagesComponent_ng_template_4_ng_container_11_ng_container_3_ng_container_2_Template","ɵɵelement","icon","image","title","ɵɵsanitizeHtml","description","MessagesComponent_ng_template_4_ng_container_11_ng_template_9_ng_container_0_Template","MessagesComponent_ng_template_4_ng_container_11_ng_template_9_ng_container_1_Template","MessagesComponent_ng_template_4_ng_container_11_ng_template_9_ng_container_3_Template","MessagesComponent_ng_template_4_ng_container_11_ng_template_9_ng_container_4_Template","ɵɵpipeBind2","time","MessagesComponent_ng_template_4_ng_container_11_ng_container_2_Template","MessagesComponent_ng_template_4_ng_container_11_ng_container_3_Template","ɵɵlistener","MessagesComponent_ng_template_4_ng_container_11_Template_button_click_5_listener","restoredCtx","ɵɵrestoreView","_r29","$implicit","ctx_r28","ɵɵnextContext","ɵɵresetView","toggleRead","MessagesComponent_ng_template_4_ng_container_11_Template_button_click_7_listener","ctx_r30","delete","MessagesComponent_ng_template_4_ng_container_11_ng_template_9_Template","ɵɵtemplateRefExtractor","ɵɵpureFunction1","_c2","read","ɵɵpureFunction2","_c3","MessagesComponent_ng_template_4_Template_button_click_3_listener","_r32","ctx_r31","closePanel","MessagesComponent_ng_template_4_Template_button_click_8_listener","ctx_r33","markAllAsRead","MessagesComponent_ng_template_4_ng_container_11_Template","MessagesComponent_ng_template_4_ng_container_12_Template","ctx_r2","messages","trackByFn","length","MessagesComponent","constructor","_changeDetectorRef","_messagesService","_overlay","_viewContainerRef","_unsubscribeAll","ngOnInit","messages$","pipe","subscribe","_calculateUnreadCount","markForCheck","ngOnDestroy","next","complete","_overlayRef","dispose","openPanel","_messagesPanel","_messagesOrigin","_createOverlay","attach","detach","message","update","id","index","item","create","hasBackdrop","backdropClass","scrollStrategy","scrollStrategies","block","positionStrategy","position","flexibleConnectedTo","_elementRef","nativeElement","withLockedPosition","withPush","withPositions","originX","originY","overlayX","overlayY","backdropClick","count","filter","_","ɵɵdirectiveInject","ChangeDetectorRef","i1","MessagesService","i2","Overlay","ViewContainerRef","_2","selectors","viewQuery","MessagesComponent_Query","rf","ctx","MessagesComponent_Template_button_click_0_listener","MessagesComponent_ng_container_2_Template","MessagesComponent_ng_template_4_Template","i3","MatIconButton","i4","MatIcon","i5","MatTooltip","encapsulation","changeDetection"],"sources":["/Users/tusharphalke/Documents/Freelancing_Work/rrms_frontend/src/app/layout/common/messages/messages.component.ts","/Users/tusharphalke/Documents/Freelancing_Work/rrms_frontend/src/app/layout/common/messages/messages.component.html"],"sourcesContent":["import { Overlay, OverlayRef } from '@angular/cdk/overlay';\nimport { TemplatePortal } from '@angular/cdk/portal';\nimport { DatePipe, NgClass, NgFor, NgIf, NgTemplateOutlet } from '@angular/common';\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnDestroy, OnInit, TemplateRef, ViewChild, ViewContainerRef, ViewEncapsulation } from '@angular/core';\nimport { MatButton, MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { RouterLink } from '@angular/router';\nimport { MessagesService } from 'app/layout/common/messages/messages.service';\nimport { Message } from 'app/layout/common/messages/messages.types';\nimport { Subject, takeUntil } from 'rxjs';\n\n@Component({\n    selector       : 'messages',\n    templateUrl    : './messages.component.html',\n    encapsulation  : ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    exportAs       : 'messages',\n    standalone     : true,\n    imports        : [MatButtonModule, NgIf, MatIconModule, MatTooltipModule, NgFor, NgClass, NgTemplateOutlet, RouterLink, DatePipe],\n})\nexport class MessagesComponent implements OnInit, OnDestroy\n{\n    @ViewChild('messagesOrigin') private _messagesOrigin: MatButton;\n    @ViewChild('messagesPanel') private _messagesPanel: TemplateRef<any>;\n\n    messages: Message[];\n    unreadCount: number = 0;\n    private _overlayRef: OverlayRef;\n    private _unsubscribeAll: Subject<any> = new Subject<any>();\n\n    /**\n     * Constructor\n     */\n    constructor(\n        private _changeDetectorRef: ChangeDetectorRef,\n        private _messagesService: MessagesService,\n        private _overlay: Overlay,\n        private _viewContainerRef: ViewContainerRef,\n    )\n    {\n    }\n\n    // -----------------------------------------------------------------------------------------------------\n    // @ Lifecycle hooks\n    // -----------------------------------------------------------------------------------------------------\n\n    /**\n     * On init\n     */\n    ngOnInit(): void\n    {\n        // Subscribe to message changes\n        this._messagesService.messages$\n            .pipe(takeUntil(this._unsubscribeAll))\n            .subscribe((messages: Message[]) =>\n            {\n                // Load the messages\n                this.messages = messages;\n\n                // Calculate the unread count\n                this._calculateUnreadCount();\n\n                // Mark for check\n                this._changeDetectorRef.markForCheck();\n            });\n    }\n\n    /**\n     * On destroy\n     */\n    ngOnDestroy(): void\n    {\n        // Unsubscribe from all subscriptions\n        this._unsubscribeAll.next(null);\n        this._unsubscribeAll.complete();\n\n        // Dispose the overlay\n        if ( this._overlayRef )\n        {\n            this._overlayRef.dispose();\n        }\n    }\n\n    // -----------------------------------------------------------------------------------------------------\n    // @ Public methods\n    // -----------------------------------------------------------------------------------------------------\n\n    /**\n     * Open the messages panel\n     */\n    openPanel(): void\n    {\n        // Return if the messages panel or its origin is not defined\n        if ( !this._messagesPanel || !this._messagesOrigin )\n        {\n            return;\n        }\n\n        // Create the overlay if it doesn't exist\n        if ( !this._overlayRef )\n        {\n            this._createOverlay();\n        }\n\n        // Attach the portal to the overlay\n        this._overlayRef.attach(new TemplatePortal(this._messagesPanel, this._viewContainerRef));\n    }\n\n    /**\n     * Close the messages panel\n     */\n    closePanel(): void\n    {\n        this._overlayRef.detach();\n    }\n\n    /**\n     * Mark all messages as read\n     */\n    markAllAsRead(): void\n    {\n        // Mark all as read\n        this._messagesService.markAllAsRead().subscribe();\n    }\n\n    /**\n     * Toggle read status of the given message\n     */\n    toggleRead(message: Message): void\n    {\n        // Toggle the read status\n        message.read = !message.read;\n\n        // Update the message\n        this._messagesService.update(message.id, message).subscribe();\n    }\n\n    /**\n     * Delete the given message\n     */\n    delete(message: Message): void\n    {\n        // Delete the message\n        this._messagesService.delete(message.id).subscribe();\n    }\n\n    /**\n     * Track by function for ngFor loops\n     *\n     * @param index\n     * @param item\n     */\n    trackByFn(index: number, item: any): any\n    {\n        return item.id || index;\n    }\n\n    // -----------------------------------------------------------------------------------------------------\n    // @ Private methods\n    // -----------------------------------------------------------------------------------------------------\n\n    /**\n     * Create the overlay\n     */\n    private _createOverlay(): void\n    {\n        // Create the overlay\n        this._overlayRef = this._overlay.create({\n            hasBackdrop     : true,\n            backdropClass   : 'fuse-backdrop-on-mobile',\n            scrollStrategy  : this._overlay.scrollStrategies.block(),\n            positionStrategy: this._overlay.position()\n                .flexibleConnectedTo(this._messagesOrigin._elementRef.nativeElement)\n                .withLockedPosition(true)\n                .withPush(true)\n                .withPositions([\n                    {\n                        originX : 'start',\n                        originY : 'bottom',\n                        overlayX: 'start',\n                        overlayY: 'top',\n                    },\n                    {\n                        originX : 'start',\n                        originY : 'top',\n                        overlayX: 'start',\n                        overlayY: 'bottom',\n                    },\n                    {\n                        originX : 'end',\n                        originY : 'bottom',\n                        overlayX: 'end',\n                        overlayY: 'top',\n                    },\n                    {\n                        originX : 'end',\n                        originY : 'top',\n                        overlayX: 'end',\n                        overlayY: 'bottom',\n                    },\n                ]),\n        });\n\n        // Detach the overlay from the portal on backdrop click\n        this._overlayRef.backdropClick().subscribe(() =>\n        {\n            this._overlayRef.detach();\n        });\n    }\n\n    /**\n     * Calculate the unread count\n     *\n     * @private\n     */\n    private _calculateUnreadCount(): void\n    {\n        let count = 0;\n\n        if ( this.messages && this.messages.length )\n        {\n            count = this.messages.filter(message => !message.read).length;\n        }\n\n        this.unreadCount = count;\n    }\n}\n","<!-- Messages toggle -->\n<button\n    mat-icon-button\n    (click)=\"openPanel()\"\n    #messagesOrigin>\n    <ng-container *ngIf=\"unreadCount > 0\">\n        <span class=\"absolute top-0 right-0 left-0 flex items-center justify-center h-3\">\n            <span class=\"flex items-center justify-center shrink-0 min-w-4 h-4 px-1 ml-4 mt-2.5 rounded-full bg-indigo-600 text-indigo-50 text-xs font-medium\">\n                {{unreadCount}}\n            </span>\n        </span>\n    </ng-container>\n    <mat-icon [svgIcon]=\"'heroicons_outline:inbox'\"></mat-icon>\n</button>\n\n<!-- Messages panel -->\n<ng-template #messagesPanel>\n\n    <div class=\"fixed inset-0 sm:static sm:inset-auto flex flex-col sm:min-w-90 sm:w-90 sm:rounded-2xl overflow-hidden shadow-lg\">\n\n        <!-- Header -->\n        <div class=\"flex shrink-0 items-center py-4 pr-4 pl-6 bg-primary text-on-primary\">\n            <div class=\"sm:hidden -ml-1 mr-3\">\n                <button\n                    mat-icon-button\n                    (click)=\"closePanel()\">\n                    <mat-icon\n                        class=\"icon-size-5 text-current\"\n                        [svgIcon]=\"'heroicons_solid:x-mark'\"></mat-icon>\n                </button>\n            </div>\n            <div class=\"text-lg font-medium leading-10\">Messages</div>\n            <div class=\"ml-auto\">\n                <button\n                    mat-icon-button\n                    [disabled]=\"unreadCount === 0\"\n                    [matTooltip]=\"'Mark all as read'\"\n                    (click)=\"markAllAsRead()\">\n                    <mat-icon\n                        class=\"icon-size-5 text-current\"\n                        [svgIcon]=\"'heroicons_solid:envelope-open'\"></mat-icon>\n                </button>\n            </div>\n        </div>\n\n        <!-- Content -->\n        <div class=\"relative flex flex-col flex-auto sm:max-h-120 divide-y overflow-y-auto bg-card\">\n            <!-- Messages -->\n            <ng-container *ngFor=\"let message of messages; trackBy: trackByFn\">\n                <div\n                    class=\"flex group hover:bg-gray-50 dark:hover:bg-black dark:hover:bg-opacity-5\"\n                    [ngClass]=\"{'unread': !message.read}\">\n\n                    <!-- Message with a link -->\n                    <ng-container *ngIf=\"message.link\">\n                        <!-- Normal links -->\n                        <ng-container *ngIf=\"!message.useRouter\">\n                            <a\n                                class=\"flex flex-auto py-5 pl-6 cursor-pointer\"\n                                [href]=\"message.link\">\n                                <ng-container *ngTemplateOutlet=\"messageContent\"></ng-container>\n                            </a>\n                        </ng-container>\n                        <!-- Router links -->\n                        <ng-container *ngIf=\"message.useRouter\">\n                            <a\n                                class=\"flex flex-auto py-5 pl-6 cursor-pointer\"\n                                [routerLink]=\"message.link\">\n                                <ng-container *ngTemplateOutlet=\"messageContent\"></ng-container>\n                            </a>\n                        </ng-container>\n                    </ng-container>\n\n                    <!-- Message without a link -->\n                    <ng-container *ngIf=\"!message.link\">\n                        <div class=\"flex flex-auto py-5 pl-6\">\n                            <ng-container *ngTemplateOutlet=\"messageContent\"></ng-container>\n                        </div>\n                    </ng-container>\n\n                    <!-- Actions -->\n                    <div class=\"relative flex flex-col my-5 mr-6 ml-2\">\n                        <!-- Indicator -->\n                        <button\n                            class=\"w-6 h-6 min-h-6\"\n                            mat-icon-button\n                            (click)=\"toggleRead(message)\"\n                            [matTooltip]=\"message.read ? 'Mark as unread' : 'Mark as read'\">\n                            <span\n                                class=\"w-2 h-2 rounded-full\"\n                                [ngClass]=\"{'bg-gray-400 dark:bg-gray-500 sm:opacity-0 sm:group-hover:opacity-100': message.read,\n                                            'bg-primary': !message.read}\"></span>\n                        </button>\n                        <!-- Remove -->\n                        <button\n                            class=\"w-6 h-6 min-h-6 sm:opacity-0 sm:group-hover:opacity-100\"\n                            mat-icon-button\n                            (click)=\"delete(message)\"\n                            [matTooltip]=\"'Remove'\">\n                            <mat-icon\n                                class=\"icon-size-4\"\n                                [svgIcon]=\"'heroicons_solid:x-mark'\"></mat-icon>\n                        </button>\n                    </div>\n                </div>\n\n                <!-- Message content template -->\n                <ng-template #messageContent>\n                    <!-- Icon -->\n                    <ng-container *ngIf=\"message.icon && !message.image\">\n                        <div class=\"flex shrink-0 items-center justify-center w-8 h-8 mr-4 rounded-full bg-gray-100 dark:bg-gray-700\">\n                            <mat-icon\n                                class=\"icon-size-5\"\n                                [svgIcon]=\"message.icon\">\n                            </mat-icon>\n                        </div>\n                    </ng-container>\n                    <!-- Image -->\n                    <ng-container *ngIf=\"message.image\">\n                        <img\n                            class=\"shrink-0 w-8 h-8 mr-4 rounded-full overflow-hidden object-cover object-center\"\n                            [src]=\"message.image\"\n                            [alt]=\"'Message image'\">\n                    </ng-container>\n                    <!-- Title, description & time -->\n                    <div class=\"flex flex-col flex-auto\">\n                        <ng-container *ngIf=\"message.title\">\n                            <div\n                                class=\"font-semibold line-clamp-1\"\n                                [innerHTML]=\"message.title\"></div>\n                        </ng-container>\n                        <ng-container *ngIf=\"message.description\">\n                            <div\n                                class=\"line-clamp-2\"\n                                [innerHTML]=\"message.description\"></div>\n                        </ng-container>\n                        <div class=\"mt-2 text-sm leading-none text-secondary\">\n                            {{message.time | date:'MMM dd, h:mm a'}}\n                        </div>\n                    </div>\n                </ng-template>\n            </ng-container>\n\n            <!-- No messages -->\n            <ng-container *ngIf=\"!messages || !messages.length\">\n                <div class=\"flex flex-col flex-auto items-center justify-center sm:justify-start py-12 px-8\">\n                    <div class=\"flex flex-0 items-center justify-center w-14 h-14 rounded-full bg-primary-100 dark:bg-primary-600\">\n                        <mat-icon\n                            class=\"text-primary-700 dark:text-primary-50\"\n                            [svgIcon]=\"'heroicons_outline:inbox'\"></mat-icon>\n                    </div>\n                    <div class=\"mt-5 text-2xl font-semibold tracking-tight\">No messages</div>\n                    <div class=\"w-full max-w-60 mt-1 text-md text-center text-secondary\">When you have messages, they will appear here.</div>\n                </div>\n            </ng-container>\n        </div>\n    </div>\n</ng-template>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}